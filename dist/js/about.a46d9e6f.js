"use strict";(self["webpackChunktp5_build"]=self["webpackChunktp5_build"]||[]).push([[594],{6902:function(t,e,n){n.d(e,{$:function(){return ud}});n(4114);var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}n(4979);var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)};function s(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],u=t[n++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&u)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=h(t[r],e[r]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function p(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function v(){return"object"===typeof self&&self.self===self}function y(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function g(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function m(){return l().indexOf("Electron/")>=0}function b(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return l().indexOf("MSAppHost/")>=0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var E="FirebaseError",I=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=E,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,_.prototype.create),o}return s(e,t),e}(Error),_=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new I(i,u,r);return a},t}();function T(t,e){return t.replace(A,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var A=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,u=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^a&(c^h),s=1518500249):(o=a^c^h,s=1859775393):r<60?(o=a&c|h&(a|c),s=2400959708):(o=a^c^h,s=3395469782);i=(u<<5|u>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(a<<30|a>>>2),a=u,u=i}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}})();function S(t,e){var n=new D(t,e);return n.subscribe.bind(n)}var D=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=x(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function x(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function O(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k=function(){return k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},k.apply(this,arguments)};function P(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?n(t.value):i(t.value).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function L(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(e){return a([t,e])}}function a(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function R(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function C(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function V(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C(arguments[e]));return t}var M=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),U="[DEFAULT]",j=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=U);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new f;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=k({identifier:U,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(r)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,q(t))try{this.getOrInitializeService(U)}catch(h){}try{for(var r=R(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=C(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(h){}}}catch(f){e={error:f}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=U),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return P(this,void 0,void 0,(function(){var t;return L(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(V(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,F(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:U:t},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t){return t===U?void 0:t}function q(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B,G=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new j(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function z(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K,H=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(K||(K={}));var W,X={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Y=K.INFO,Q=(B={},B[K.DEBUG]="log",B[K.VERBOSE]="log",B[K.INFO]="info",B[K.WARN]="warn",B[K.ERROR]="error",B),J=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Q[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,z(["["+i+"]  "+t.name+":"],n))}},$=function(){function t(t){this.name=t,this._logLevel=Y,this._logHandler=J,this._userLogHandler=null,H.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in K))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?X[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,z([this,K.DEBUG],t)),this._logHandler.apply(this,z([this,K.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,z([this,K.VERBOSE],t)),this._logHandler.apply(this,z([this,K.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,z([this,K.INFO],t)),this._logHandler.apply(this,z([this,K.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,z([this,K.WARN],t)),this._logHandler.apply(this,z([this,K.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,z([this,K.ERROR],t)),this._logHandler.apply(this,z([this,K.ERROR],t))},t}();function Z(t){H.forEach((function(e){e.setLogLevel(t)}))}function tt(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=X[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:K[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=H;r<i.length;r++){var o=i[r];n(o)}}var et,nt=(W={},W["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",W["bad-app-name"]="Illegal App name: '{$appName}",W["duplicate-app"]="Firebase App named '{$appName}' already exists",W["app-deleted"]="Firebase App named '{$appName}' already deleted",W["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",W["invalid-log-argument"]="First argument to `onLog` must be null or a function.",W),rt=new _("app","Firebase",nt),it="@firebase/app",ot="0.6.12",st="@firebase/analytics",ut="@firebase/auth",at="@firebase/database",ct="@firebase/functions",ht="@firebase/installations",ft="@firebase/messaging",lt="@firebase/performance",pt="@firebase/remote-config",dt="@firebase/storage",vt="@firebase/firestore",yt="firebase-wrapper",gt="[DEFAULT]",mt=(et={},et[it]="fire-core",et[st]="fire-analytics",et[ut]="fire-auth",et[at]="fire-rtdb",et[ct]="fire-fn",et[ht]="fire-iid",et[ft]="fire-fcm",et[lt]="fire-perf",et[pt]="fire-rc",et[dt]="fire-gcs",et[vt]="fire-fst",et["fire-js"]="fire-js",et[yt]="fire-js-all",et),bt=new $("@firebase/app"),wt=function(){function t(t,e,n){var r,o,s=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=c(t),this.container=new G(e.name),this._addComponent(new M("app",(function(){return s}),"PUBLIC"));try{for(var u=i(this.firebase_.INTERNAL.components.values()),a=u.next();!a.done;a=u.next()){var h=a.value;this._addComponent(h)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=gt),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=gt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){bt.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw rt.create("app-deleted",{appName:this.name_})},t}();wt.prototype.name&&wt.prototype.options||wt.prototype.delete||console.log("dc");var Et="8.0.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){var e={},n=new Map,r={__esModule:!0,initializeApp:u,app:s,registerVersion:f,setLogLevel:Z,onLog:l,apps:null,SDK_VERSION:Et,INTERNAL:{registerComponent:c,removeApp:o,components:n,useAsService:p}};function o(t){delete e[t]}function s(t){if(t=t||gt,!N(e,t))throw rt.create("no-app",{appName:t});return e[t]}function u(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=gt);var u=s.name;if("string"!==typeof u||!u)throw rt.create("bad-app-name",{appName:String(u)});if(N(e,u))throw rt.create("duplicate-app",{appName:u});var a=new t(n,s,r);return e[u]=a,a}function a(){return Object.keys(e).map((function(t){return e[t]}))}function c(o){var u,a,c=o.name;if(n.has(c))return bt.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===o.type?r[c]:null;if(n.set(c,o),"PUBLIC"===o.type){var f=function(t){if(void 0===t&&(t=s()),"function"!==typeof t[c])throw rt.create("invalid-app-argument",{appName:c});return t[c]()};void 0!==o.serviceProps&&h(f,o.serviceProps),r[c]=f,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,c);return n.apply(this,o.multipleInstances?t:[])}}try{for(var l=i(Object.keys(e)),p=l.next();!p.done;p=l.next()){var d=p.value;e[d]._addComponent(o)}}catch(v){u={error:v}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return"PUBLIC"===o.type?r[c]:null}function f(t,e,n){var r,i=null!==(r=mt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void bt.warn(u.join(" "))}c(new M(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function l(t,e){if(null!==t&&"function"!==typeof t)throw rt.create("invalid-log-argument",{appName:name});tt(t,e)}function p(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:a}),s["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){var t=It(wt);function e(e){h(t,e)}return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:_t,extendNamespace:e,createSubscribe:S,ErrorFactory:_,deepExtend:h}),t}var Tt=_t(),At=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(Nt(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,e){t.INTERNAL.registerComponent(new M("platform-logger",(function(t){return new At(t)}),"PRIVATE")),t.registerVersion(it,ot,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(v()&&void 0!==self.firebase){bt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&bt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var xt=Tt.initializeApp;Tt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return d()&&bt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),xt.apply(void 0,t)};var Ot=Tt;St(Ot);var kt=Ot,Pt="firebase",Lt="8.0.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
kt.registerVersion(Pt,Lt,"app");n(6573),n(8100),n(7936),n(7467),n(4732),n(9577),n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var Rt=function(t,e){return Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Rt(t,e)};function Ct(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Vt(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?n(t.value):i(t.value).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function Mt(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(e){return a([t,e])}}function a(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Ut(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var jt=function(t,e){return jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},jt(t,e)};function Ft(t,e){function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function qt(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Bt,Gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},zt=zt||{},Kt=Gt||self;function Ht(){}function Wt(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Xt(t){var e=Wt(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Yt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function Qt(t){return Object.prototype.hasOwnProperty.call(t,Jt)&&t[Jt]||(t[Jt]=++$t)}var Jt="closure_uid_"+(1e9*Math.random()>>>0),$t=0;function Zt(t,e,n){return t.call.apply(t.bind,arguments)}function te(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ee(t,e,n){return ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zt:te,ee.apply(null,arguments)}function ne(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var re=Date.now;function ie(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function oe(){this.j=this.j,this.i=this.i}var se=0;oe.prototype.j=!1,oe.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=se))Qt(this)},oe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ue=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ae=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ce(t){t:{for(var e=wi,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function he(t){return Array.prototype.concat.apply([],arguments)}function fe(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function le(t){return/^[\s\xa0]*$/.test(t)}var pe,de=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ve(t,e){return-1!=t.indexOf(e)}function ye(t,e){return t<e?-1:t>e?1:0}t:{var ge=Kt.navigator;if(ge){var me=ge.userAgent;if(me){pe=me;break t}}pe=""}function be(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function we(t){var e={};for(var n in t)e[n]=t[n];return e}var Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<Ee.length;o++)n=Ee[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _e(t){return _e[" "](t),t}function Te(t,e){var n=Me;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}_e[" "]=Ht;var Ae,Ne=ve(pe,"Opera"),Se=ve(pe,"Trident")||ve(pe,"MSIE"),De=ve(pe,"Edge"),xe=De||Se,Oe=ve(pe,"Gecko")&&!(ve(pe.toLowerCase(),"webkit")&&!ve(pe,"Edge"))&&!(ve(pe,"Trident")||ve(pe,"MSIE"))&&!ve(pe,"Edge"),ke=ve(pe.toLowerCase(),"webkit")&&!ve(pe,"Edge");function Pe(){var t=Kt.document;return t?t.documentMode:void 0}t:{var Le="",Re=function(){var t=pe;return Oe?/rv:([^\);]+)(\)|;)/.exec(t):De?/Edge\/([\d\.]+)/.exec(t):Se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ke?/WebKit\/(\S+)/.exec(t):Ne?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Re&&(Le=Re?Re[1]:""),Se){var Ce=Pe();if(null!=Ce&&Ce>parseFloat(Le)){Ae=String(Ce);break t}}Ae=Le}var Ve,Me={};function Ue(t){return Te(t,(function(){for(var e=0,n=de(String(Ae)).split("."),r=de(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=ye(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||ye(0==s[2].length,0==u[2].length)||ye(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(Kt.document&&Se){var je=Pe();Ve=je||(parseInt(Ae,10)||void 0)}else Ve=void 0;var Fe=Ve,qe=!Se||9<=Number(Fe),Be=Se&&!Ue("9"),Ge=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Kt.addEventListener("test",Ht,e),Kt.removeEventListener("test",Ht,e)}catch(n){}return t}();function ze(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ke(t,e){if(ze.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Oe){t:{try{_e(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:He[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ze.prototype.b=function(){this.defaultPrevented=!0},ie(Ke,ze);var He={2:"touch",3:"pen",4:"mouse"};Ke.prototype.b=function(){Ke.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Be)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(ao){}};var We="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function Ye(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Xe,this.Y=this.Z=!1}function Qe(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Je(t){this.src=t,this.a={},this.b=0}function $e(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ue(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Je.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=Ze(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):(e=new Ye(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var tn="closure_lm_"+(1e6*Math.random()|0),en={};function nn(t,e,n,r,i){if(r&&r.once)return sn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);return null}return n=dn(n),t&&t[We]?t.va(e,n,Yt(r)?!!r.capture:!!r,i):rn(t,e,n,!1,r,i)}function rn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Yt(i)?!!i.capture:!!i;if(s&&!qe)return null;var u=ln(t);if(u||(t[tn]=u=new Je(t)),n=u.add(e,n,r,s,o),n.proxy)return n;if(r=on(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ge||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function on(){var t=fn,e=qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function sn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);return null}return n=dn(n),t&&t[We]?t.wa(e,n,Yt(r)?!!r.capture:!!r,i):rn(t,e,n,!0,r,i)}function un(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else r=Yt(r)?!!r.capture:!!r,n=dn(n),t&&t[We]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Ze(o,n,r,i),-1<n&&(Qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=ln(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ze(e,n,r,i)),(n=-1<t?e[t]:null)&&an(n))}function an(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[We])$e(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ln(e))?($e(n,t),0==n.b&&(n.src=null,e[tn]=null)):Qe(t)}}}function cn(t){return t in en?en[t]:en[t]="on"+t}function hn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&an(t),n.call(r,e)}function fn(t,e){if(t.Y)return!0;if(!qe){if(!e)t:{e=["window","event"];for(var n=Kt,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}return e=new Ke(e,this),hn(t,e)}return hn(t,new Ke(e,this))}function ln(t){return t=t[tn],t instanceof Je?t:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function dn(t){return"function"==Wt(t)?t:(t[pn]||(t[pn]=function(e){return t.handleEvent(e)}),t[pn])}function vn(){oe.call(this),this.c=new Je(this),this.J=this,this.C=null}function yn(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&$e(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}ie(vn,oe),vn.prototype[We]=!0,Bt=vn.prototype,Bt.addEventListener=function(t,e,n,r){nn(this,t,e,n,r)},Bt.removeEventListener=function(t,e,n,r){un(this,t,e,n,r)},Bt.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"===typeof t)t=new ze(t,n);else if(t instanceof ze)t.target=t.target||n;else{var i=t;t=new ze(r,n),Ie(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=yn(s,r,!0,t)&&i}if(s=t.a=n,i=yn(s,r,!0,t)&&i,i=yn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.a=e[o],i=yn(s,r,!1,t)&&i;return i},Bt.G=function(){if(vn.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Qe(n[r]);delete e.a[t],e.b--}}this.C=null},Bt.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Bt.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var gn=Kt.JSON.stringify;function mn(){this.b=this.a=null}var bn,wn=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new In}),(function(t){t.reset()}),100);function En(){var t=Sn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function In(){this.next=this.b=this.a=null}function _n(t){Kt.setTimeout((function(){throw t}),0)}function Tn(t,e){bn||An(),Nn||(bn(),Nn=!0),Sn.add(t,e)}function An(){var t=Kt.Promise.resolve(void 0);bn=function(){t.then(Dn)}}mn.prototype.add=function(t,e){var n=wn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},In.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},In.prototype.reset=function(){this.next=this.b=this.a=null};var Nn=!1,Sn=new mn;function Dn(){for(var t;t=En();){try{t.a.call(t.b)}catch(n){_n(n)}var e=wn;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Nn=!1}function xn(t,e){vn.call(this),this.b=t||1,this.a=e||Kt,this.f=ee(this.Ya,this),this.g=re()}function On(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function kn(t,e,n){if("function"==Wt(t))n&&(t=ee(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ee(t.handleEvent,t)}return 2147483647<Number(e)?-1:Kt.setTimeout(t,e||0)}function Pn(t){t.a=kn((function(){t.a=null,t.c&&(t.c=!1,Pn(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ie(xn,vn),Bt=xn.prototype,Bt.aa=!1,Bt.M=null,Bt.Ya=function(){if(this.aa){var t=re()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(On(this),this.start()))}},Bt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=re())},Bt.G=function(){xn.S.G.call(this),On(this),delete this.a};var Ln=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return Ft(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Pn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Kt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(oe);function Rn(t){oe.call(this),this.b=t,this.a={}}ie(Rn,oe);var Cn=[];function Vn(t,e,n,r){Array.isArray(n)||(n&&(Cn[0]=n.toString()),n=Cn);for(var i=0;i<n.length;i++){var o=nn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Mn(t){be(t.a,(function(t,e){this.a.hasOwnProperty(e)&&an(t)}),t),t.a={}}function Un(){this.a=!0}function jn(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function Fn(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function qn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Gn(t,n)+(r?" "+r:"")}))}function Bn(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Gn(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return gn(n)}catch(u){return e}}Rn.prototype.G=function(){Rn.S.G.call(this),Mn(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Un.prototype.info=function(){};var zn=null;function Kn(){return zn=zn||new vn}function Hn(t){ze.call(this,"serverreachability",t)}function Wn(t){var e=Kn();e.dispatchEvent(new Hn(e,t))}function Xn(t){ze.call(this,"statevent",t)}function Yn(t){var e=Kn();e.dispatchEvent(new Xn(e,t))}function Qn(t){ze.call(this,"timingevent",t)}function Jn(t,e){if("function"!=Wt(t))throw Error("Fn must not be null and must be a function");return Kt.setTimeout((function(){t()}),e)}ie(Hn,ze),ie(Xn,ze),ie(Qn,ze);var $n={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Zn={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function tr(){}function er(t){var e;return(e=t.a)||(e=t.a={}),e}function nr(){}tr.prototype.a=null;var rr,ir={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function or(){ze.call(this,"d")}function sr(){ze.call(this,"c")}function ur(){}function ar(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Rn(this),this.P=cr,t=xe?125:void 0,this.R=new xn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}ie(or,ze),ie(sr,ze),ie(ur,tr),rr=new ur;var cr=45e3,hr={},fr={};function lr(t,e,n){t.H=1,t.i=Vr(Or(e)),t.j=n,t.I=!0,pr(t,null)}function pr(t,e){t.u=re(),yr(t),t.l=Or(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Jr(n.b,"t",r),t.D=0,t.a=Qi(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ln(ee(t.Ca,t,t.a),t.O)),Vn(t.J,t.a,"readystatechange",t.Wa),e=t.B?we(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Wn(1),jn(t.c,t.m,t.l,t.f,t.T,t.j)}function dr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=vr(t,n);if(i==fr){4==e&&(t.h=4,Yn(14),r=!1),qn(t.c,t.f,null,"[Incomplete Response]");break}if(i==hr){t.h=4,Yn(15),qn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}qn(t.c,t.f,i,null),Er(t,i)}4==e&&0==n.length&&(t.h=1,Yn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,e=t.g,e.a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bi(e),e.F=!0)):(qn(t.c,t.f,n,"[Invalid Chunked Response]"),wr(t),br(t))}function vr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?fr:(n=Number(e.substring(n,r)),isNaN(n)?hr:(r+=1,r+n>e.length?fr:(e=e.substr(r,n),t.D=r+n,e)))}function yr(t){t.U=re()+t.P,gr(t,t.P)}function gr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Jn(ee(t.Ua,t),e)}function mr(t){t.o&&(Kt.clearTimeout(t.o),t.o=null)}function br(t){0==t.g.v||t.A||Ki(t.g,t)}function wr(t){mr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,On(t.R),Mn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Er(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||oi(n.b,t)))if(n.I=t.N,!t.C&&oi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;zi(n),Pi(n)}qi(n),Yn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Jn(ee(n.Ra,n),6e3));if(1>=ii(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Wi(n,11)}else if((t.C||n.a==t)&&zi(n),!le(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"===typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(ve(h,"spdy")||ve(h,"quic")||ve(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(si(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Cr(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=re()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),a=n;var p=t;if(a.la=Yi(a,a.C?a.ga:null,a.fa),p.C){ui(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(mr(d),yr(d)),a.a=p}else Fi(a);0<n.g.length&&Ci(n)}else"stop"!=i[0]&&"close"!=i[0]||Wi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wi(n,7):ki(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Wn(4)}catch(y){}}function Ir(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(Xt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _r(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xt(t)||"string"===typeof t)ae(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Xt(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Ir(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Tr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ar(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Nr(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Bt=ar.prototype,Bt.setTimeout=function(t){this.P=t},Bt.Wa=function(t){t=t.target;var e=this.F;e&&3==Ni(t)?e.f():this.Ca(t)},Bt.Ca=function(t){try{if(t==this.a)t:{var e=Ni(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!xe&&!this.a.$())){this.A||4!=e||7==n||Wn(8==n||0>=r?3:2),mr(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,Fn(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,Yn(12),wr(this),br(this);break t}qn(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Er(this,a)}this.I?(dr(this,e,o),xe&&this.b&&3==e&&(Vn(this.J,this.R,"tick",this.Va),this.R.start())):(qn(this.c,this.f,o,null),Er(this,o)),4==e&&wr(this),this.b&&!this.A&&(4==e?Ki(this.g,this):(this.b=!1,yr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Yn(12)):(this.h=0,Yn(13)),wr(this),br(this)}}}catch(c){}},Bt.Va=function(){if(this.a){var t=Ni(this.a),e=this.a.$();this.D<e.length&&(mr(this),dr(this,t,e),this.b&&4!=t&&yr(this))}},Bt.cancel=function(){this.A=!0,wr(this)},Bt.Ua=function(){this.o=null;var t=re();0<=t-this.U?(Bn(this.c,this.l),2!=this.H&&(Wn(3),Yn(17)),wr(this),this.h=2,br(this)):gr(this,this.U-t)},Bt=Tr.prototype,Bt.K=function(){Ar(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Bt.L=function(){return Ar(this),this.a.concat()},Bt.get=function(t,e){return Nr(this.b,t)?this.b[t]:e},Bt.set=function(t,e){Nr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Bt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Sr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dr(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function xr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof xr){this.a=void 0!==e?e:t.a,kr(this,t.f),this.j=t.j,Pr(this,t.c),Lr(this,t.h),this.g=t.g,e=t.b;var n=new Wr;n.c=e.c,e.a&&(n.a=new Tr(e.a),n.b=e.b),Rr(this,n),this.i=t.i}else t&&(n=String(t).match(Sr))?(this.a=!!e,kr(this,n[1]||"",!0),this.j=jr(n[2]||""),Pr(this,n[3]||"",!0),Lr(this,n[4]),this.g=jr(n[5]||"",!0),Rr(this,n[6]||"",!0),this.i=jr(n[7]||"")):(this.a=!!e,this.b=new Wr(null,this.a))}function Or(t){return new xr(t)}function kr(t,e,n){t.f=n?jr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pr(t,e,n){t.c=n?jr(e,!0):e}function Lr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Rr(t,e,n){e instanceof Wr?(t.b=e,Zr(t.b,t.a)):(n||(e=Fr(e,Kr)),t.b=new Wr(e,t.a))}function Cr(t,e,n){t.b.set(e,n)}function Vr(t){return Cr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^re()).toString(36)),t}function Mr(t){return t instanceof xr?Or(t):new xr(t,void 0)}function Ur(t,e,n,r){var i=new xr(null,void 0);return t&&kr(i,t),e&&Pr(i,e),n&&Lr(i,n),r&&(i.g=r),i}function jr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,qr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}xr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fr(e,Br,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Fr(e,Br,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fr(n,"/"==n.charAt(0)?zr:Gr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Fr(n,Hr)),t.join("")};var Br=/[#\/\?@]/g,Gr=/[#\?:]/g,zr=/[#\?]/g,Kr=/[#\?@]/g,Hr=/#/g;function Wr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Xr(t){t.a||(t.a=new Tr,t.b=0,t.c&&Dr(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yr(t,e){Xr(t),e=$r(t,e),Nr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Nr(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ar(t)))}function Qr(t,e){return Xr(t),e=$r(t,e),Nr(t.a.b,e)}function Jr(t,e,n){Yr(t,e),0<n.length&&(t.c=null,t.a.set($r(t,e),fe(n)),t.b+=n.length)}function $r(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Zr(t,e){e&&!t.f&&(Xr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yr(this,e),Jr(this,n,t))}),t)),t.f=e}function ti(t,e){this.b=t,this.a=e}function ei(t){this.g=t||ni,Kt.PerformanceNavigationTiming?(t=Kt.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(Kt.ia&&Kt.ia.ya&&Kt.ia.ya()&&Kt.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}Bt=Wr.prototype,Bt.add=function(t,e){Xr(this),this.c=null,t=$r(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Bt.forEach=function(t,e){Xr(this),this.a.forEach((function(n,r){ae(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Bt.L=function(){Xr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Bt.K=function(t){Xr(this);var e=[];if("string"===typeof t)Qr(this,t)&&(e=he(e,this.a.get($r(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=he(e,t[n])}return e},Bt.set=function(t,e){return Xr(this),this.c=null,t=$r(this,t),Qr(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Bt.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e},Bt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ni=10;function ri(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ii(t){return t.b?1:t.a?t.a.size:0}function oi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function si(t,e){t.a?t.a.add(e):t.b=e}function ui(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ai(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=qt(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return fe(t.c)}function ci(){}function hi(){this.a=new ci}function fi(t,e,n){var r=n||"";try{_r(t,(function(t,n){var i=t;Yt(t)&&(i=gn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function li(t,e){var n=new Un;if(Kt.Image){var r=new Image;r.onload=ne(pi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ne(pi,n,r,"TestLoadImage: error",!1,e),r.onabort=ne(pi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ne(pi,n,r,"TestLoadImage: timeout",!1,e),Kt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function pi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ei.prototype.cancel=function(){var t,e;if(this.c=ai(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=qt(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ci.prototype.stringify=function(t){return Kt.JSON.stringify(t,void 0)},ci.prototype.parse=function(t){return Kt.JSON.parse(t,void 0)};var di=Kt.JSON.parse;function vi(t){vn.call(this),this.headers=new Tr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=yi,this.D=this.F=!1}ie(vi,vn);var yi="",gi=/^https?$/i,mi=["POST","PUT"];function bi(t){return Se&&Ue(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function wi(t){return"content-type"==t.toLowerCase()}function Ei(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ii(t),Ti(t)}function Ii(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function _i(t){if(t.b&&"undefined"!=typeof zt&&(!t.s[1]||4!=Ni(t)||2!=t.X()))if(t.l&&4==Ni(t))kn(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Ni(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Sr)[1]||null;if(!o&&Kt.self&&Kt.self.location){var s=Kt.self.location.protocol;o=s.substr(0,s.length-1)}i=!gi.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<Ni(t)?t.a.statusText:""}catch(a){u=""}t.f=u+" ["+t.X()+"]",Ii(t)}}finally{Ti(t)}}}function Ti(t,e){if(t.a){Ai(t);var n=t.a,r=t.s[0]?Ht:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Ai(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Kt.clearTimeout(t.m),t.m=null)}function Ni(t){return t.a?t.a.readyState:0}function Si(t){var e="";return be(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Di(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Si(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Cr(t,e,n))}function xi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Oi(t){this.pa=0,this.g=[],this.c=new Un,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=xi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=xi("baseRetryDelayMs",5e3,t),this.Ma=xi("retryDelaySeedMs",1e4,t),this.Ja=xi("forwardChannelMaxRetries",2,t),this.ma=xi("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ei(t&&t.concurrentRequestLimit),this.ka=new hi,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function ki(t){if(Li(t),3==t.v){var e=t.R++,n=Or(t.B);Cr(n,"SID",t.J),Cr(n,"RID",e),Cr(n,"TYPE","terminate"),Ui(t,n),e=new ar(t,t.c,e,void 0),e.H=2,e.i=Vr(Or(n)),n=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(n=Kt.navigator.sendBeacon(e.i.toString(),"")),!n&&Kt.Image&&((new Image).src=e.i,n=!0),n||(e.a=Qi(e.g,null),e.a.ba(e.i)),e.u=re(),yr(e)}Xi(t)}function Pi(t){t.a&&(Bi(t),t.a.cancel(),t.a=null)}function Li(t){Pi(t),t.j&&(Kt.clearTimeout(t.j),t.j=null),zi(t),t.b.cancel(),t.h&&("number"===typeof t.h&&Kt.clearTimeout(t.h),t.h=null)}function Ri(t,e){t.g.push(new ti(t.La++,e)),3==t.v&&Ci(t)}function Ci(t){ri(t.b)||t.h||(t.h=!0,Tn(t.Ba,t),t.u=0)}function Vi(t,e){return!(ii(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja))&&(t.h=Jn(ee(t.Ba,t,e),Hi(t,t.u)),t.u++,!0))}function Mi(t,e){var n;n=e?e.f:t.R++;var r=Or(t.B);Cr(r,"SID",t.J),Cr(r,"RID",n),Cr(r,"AID",t.P),Ui(t,r),t.i&&t.l&&Di(r,t.i,t.l),n=new ar(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ji(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),si(t.b,n),lr(n,r,e)}function Ui(t,e){t.f&&_r({},(function(t,n){Cr(e,n,t)}))}function ji(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ee(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(c-=o,0>c)o=Math.max(0,i[a].b-100),u=!1;else try{fi(h,s,"req"+c+"_")}catch(Lo){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Fi(t){t.a||t.j||(t.U=1,Tn(t.Aa,t),t.o=0)}function qi(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=Jn(ee(t.Aa,t),Hi(t,t.o)),t.o++,!0)}function Bi(t){null!=t.s&&(Kt.clearTimeout(t.s),t.s=null)}function Gi(t){t.a=new ar(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Or(t.la);Cr(e,"RID","rpc"),Cr(e,"SID",t.J),Cr(e,"CI",t.H?"0":"1"),Cr(e,"AID",t.P),Ui(t,e),Cr(e,"TYPE","xmlhttp"),t.i&&t.l&&Di(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Vr(Or(e)),n.j=null,n.I=!0,pr(n,t)}function zi(t){null!=t.m&&(Kt.clearTimeout(t.m),t.m=null)}function Ki(t,e){var n=null;if(t.a==e){zi(t),Bi(t),t.a=null;var r=2}else{if(!oi(t.b,e))return;n=e.s,ui(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=re()-e.u;var i=t.u;r=Kn(),r.dispatchEvent(new Qn(r,n,e,i)),Ci(t)}else Fi(t);else if(i=e.h,3==i||0==i&&0<t.I||!(1==r&&Vi(t,e)||2==r&&qi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wi(t,5);break;case 4:Wi(t,10);break;case 3:Wi(t,6);break;default:Wi(t,2)}}function Hi(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wi(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ee(t.Xa,t);n||(n=new xr("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||kr(n,"https"),Vr(n)),li(n.toString(),r)}else Yn(2);t.v=0,t.f&&t.f.ra(e),Xi(t),Li(t)}function Xi(t){t.v=0,t.I=-1,t.f&&(0==ai(t.b).length&&0==t.g.length||(t.b.c.length=0,fe(t.g),t.g.length=0),t.f.qa())}function Yi(t,e,n){var r=Mr(n);if(""!=r.c)e&&Pr(r,e+"."+r.c),Lr(r,r.h);else{var i=Kt.location;r=Ur(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&be(t.W,(function(t,e){Cr(r,e,t)})),e=t.A,n=t.na,e&&n&&Cr(r,e,n),Cr(r,"VER",t.ha),Ui(t,r),r}function Qi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new vi(t.Ka),e.F=t.C,e}function Ji(){}function $i(){if(Se&&!(10<=Number(Fe)))throw Error("Environmental error: no available transport.")}function Zi(t,e){vn.call(this),this.a=new Oi(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!le(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!le(e)&&(this.a.A=e,t=this.b,null!==t&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new no(this)}function to(t){or.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function eo(){sr.call(this),this.status=1}function no(t){this.a=t}Bt=vi.prototype,Bt.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?er(this.H):er(rr),this.a.onreadystatechange=ee(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ei(this,o)}t=n||"";var i=new Tr(this.headers);r&&_r(r,(function(t,e){i.set(e,t)})),r=ce(i.L()),n=Kt.FormData&&t instanceof Kt.FormData,!(0<=ue(mi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ai(this),0<this.o&&((this.D=bi(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ee(this.xa,this)):this.m=kn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ei(this,o)}},Bt.xa=function(){"undefined"!=typeof zt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Bt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ti(this))},Bt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ti(this,!0)),vi.S.G.call(this)},Bt.za=function(){this.j||(this.A||this.l||this.g?_i(this):this.Ta())},Bt.Ta=function(){_i(this)},Bt.X=function(){try{return 2<Ni(this)?this.a.status:-1}catch(t){return-1}},Bt.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Bt.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),di(e)}},Bt.ua=function(){return this.h},Bt.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},Bt=Oi.prototype,Bt.ha=8,Bt.v=1,Bt.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ar(this,this.c,t,void 0),r=this.l;if(this.O&&(r?(r=we(r),Ie(r,this.O)):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(o="__data__"in o.a&&(o=o.a.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(e+=o,4096<e){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ji(this,n,e),i=Or(this.B),Cr(i,"RID",t),Cr(i,"CVER",22),this.A&&Cr(i,"X-HTTP-Session-Id",this.A),Ui(this,i),this.i&&r&&Di(i,this.i,r),si(this.b,n),this.Ga&&Cr(i,"TYPE","init"),this.da?(Cr(i,"$req",e),Cr(i,"SID","null"),n.V=!0,lr(n,i,null)):lr(n,i,e),this.v=2}}else 3==this.v&&(t?Mi(this,t):0==this.g.length||ri(this.b)||Mi(this))},Bt.Aa=function(){if(this.j=null,Gi(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Jn(ee(this.Sa,this),t)}},Bt.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Pi(this),Gi(this))},Bt.Ra=function(){null!=this.m&&(this.m=null,Pi(this),qi(this),Yn(19))},Bt.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Yn(2)):(this.c.info("Failed to ping google.com"),Yn(1))},Bt=Ji.prototype,Bt.ta=function(){},Bt.sa=function(){},Bt.ra=function(){},Bt.qa=function(){},Bt.Ha=function(){},$i.prototype.a=function(t,e){return new Zi(t,e)},ie(Zi,vn),Bt=Zi.prototype,Bt.addEventListener=function(t,e,n,r){Zi.S.addEventListener.call(this,t,e,n,r)},Bt.removeEventListener=function(t,e,n,r){Zi.S.removeEventListener.call(this,t,e,n,r)},Bt.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Yn(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Yi(t,null,t.fa),Ci(t)},Bt.close=function(){ki(this.a)},Bt.Pa=function(t){if("string"===typeof t){var e={};e.__data__=t,Ri(this.a,e)}else this.g?(e={},e.__data__=gn(t),Ri(this.a,e)):Ri(this.a,t)},Bt.G=function(){this.a.f=null,delete this.f,ki(this.a),delete this.a,Zi.S.G.call(this)},ie(to,or),ie(eo,sr),ie(no,Ji),no.prototype.ta=function(){this.a.dispatchEvent("a")},no.prototype.sa=function(t){this.a.dispatchEvent(new to(t))},no.prototype.ra=function(t){this.a.dispatchEvent(new eo(t))},no.prototype.qa=function(){this.a.dispatchEvent("b")},$i.prototype.createWebChannel=$i.prototype.a,Zi.prototype.send=Zi.prototype.Pa,Zi.prototype.open=Zi.prototype.Oa,Zi.prototype.close=Zi.prototype.close,$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Zn.COMPLETE="complete",nr.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",vn.prototype.listen=vn.prototype.va,vi.prototype.listenOnce=vi.prototype.wa,vi.prototype.getLastError=vi.prototype.Qa,vi.prototype.getLastErrorCode=vi.prototype.ua,vi.prototype.getStatus=vi.prototype.X,vi.prototype.getResponseJson=vi.prototype.Na,vi.prototype.getResponseText=vi.prototype.$,vi.prototype.send=vi.prototype.ba;var ro=function(){return new $i},io=$n,oo=Zn,so=nr,uo=vi,ao={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},co=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Ct(e,t),e}(Error),ho=new $("@firebase/firestore");function fo(){return ho.logLevel}function lo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ho.logLevel<=K.DEBUG){var r=e.map(yo);ho.debug.apply(ho,Ut(["Firestore (8.0.0): "+t],r))}}function po(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ho.logLevel<=K.ERROR){var r=e.map(yo);ho.error.apply(ho,Ut(["Firestore (8.0.0): "+t],r))}}function vo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ho.logLevel<=K.WARN){var r=e.map(yo);ho.warn.apply(ho,Ut(["Firestore (8.0.0): "+t],r))}}function yo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.0) INTERNAL ASSERTION FAILED: "+t;throw po(e),new Error(e)}function mo(t,e){t||go()}function bo(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eo=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=wo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Io(t,e){return t<e?-1:t>e?1:0}function _o(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function To(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ao=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.h=function(t){return Io(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Ao.u=new Ao("");var No=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Ao.fromBase64String(e))}catch(e){throw new co(ao.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ao.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(){if("undefined"==typeof Uint8Array)throw new co(ao.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Do(){if("undefined"==typeof atob)throw new co(ao.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.fromBase64String=function(t){Do();try{return new e(Ao.fromBase64String(t))}catch(t){throw new co(ao.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return So(),new e(Ao.fromUint8Array(t))},e.prototype.toBase64=function(){return Do(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return So(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(No),Oo=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},ko=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return Io(this.projectId,t.projectId)||Io(this.database,t.database)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ro(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Co=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.A(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Lo(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.P=function(){return Ro(this.R)},t}(),Vo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new co(ao.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new co(ao.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new co(ao.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new co(ao.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?Io(this.nanoseconds,t.nanoseconds):Io(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Mo=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Vo(0,0))},t.prototype.h=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),Uo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&go(),void 0===n?n=t.length-e:n>t.length-e&&go(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return t=void 0===t?1:t,this.C(this.segments,this.offset+t,this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.k=function(){return this.segments[this.offset]},t.prototype.O=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new co(ao.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(Uo),Fo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return Fo.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new co(ao.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new co(ao.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new co(ao.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new co(ao.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(Uo),Bo=function(){function t(t){this.path=t}return t.H=function(e){return new t(jo.q(e))},t.J=function(e){return new t(jo.q(e).N(5))},t.prototype.Y=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===jo.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return jo.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new jo(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){return null==t}function zo(t){return 0===t&&1/t==-1/0}function Ko(t){return"number"==typeof t&&Number.isInteger(t)&&!zo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function Wo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ho(t,e,n,r,i,o,s)}function Xo(t){var e=bo(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+js(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),Go(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ga(e.startAt)),e.endAt&&(n+="|ub:",n+=Ga(e.endAt)),e.tt=n}return e.tt}function Yo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Cs(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ka(t.startAt,e.startAt)&&Ka(t.endAt,e.endAt)}function Qo(t){return Bo.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jo,$o,Zo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Mo.min()),void 0===o&&(o=Mo.min()),void 0===s&&(s=Ao.u),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),ts=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){switch(t){case ao.OK:return go();case ao.CANCELLED:case ao.UNKNOWN:case ao.DEADLINE_EXCEEDED:case ao.RESOURCE_EXHAUSTED:case ao.INTERNAL:case ao.UNAVAILABLE:case ao.UNAUTHENTICATED:return!1;case ao.INVALID_ARGUMENT:case ao.NOT_FOUND:case ao.ALREADY_EXISTS:case ao.PERMISSION_DENIED:case ao.FAILED_PRECONDITION:case ao.ABORTED:case ao.OUT_OF_RANGE:case ao.UNIMPLEMENTED:case ao.DATA_LOSS:return!0;default:return go()}}function ns(t){if(void 0===t)return po("GRPC error has no .code"),ao.UNKNOWN;switch(t){case Jo.OK:return ao.OK;case Jo.CANCELLED:return ao.CANCELLED;case Jo.UNKNOWN:return ao.UNKNOWN;case Jo.DEADLINE_EXCEEDED:return ao.DEADLINE_EXCEEDED;case Jo.RESOURCE_EXHAUSTED:return ao.RESOURCE_EXHAUSTED;case Jo.INTERNAL:return ao.INTERNAL;case Jo.UNAVAILABLE:return ao.UNAVAILABLE;case Jo.UNAUTHENTICATED:return ao.UNAUTHENTICATED;case Jo.INVALID_ARGUMENT:return ao.INVALID_ARGUMENT;case Jo.NOT_FOUND:return ao.NOT_FOUND;case Jo.ALREADY_EXISTS:return ao.ALREADY_EXISTS;case Jo.PERMISSION_DENIED:return ao.PERMISSION_DENIED;case Jo.FAILED_PRECONDITION:return ao.FAILED_PRECONDITION;case Jo.ABORTED:return ao.ABORTED;case Jo.OUT_OF_RANGE:return ao.OUT_OF_RANGE;case Jo.UNIMPLEMENTED:return ao.UNIMPLEMENTED;case Jo.DATA_LOSS:return ao.DATA_LOSS;default:return go()}}($o=Jo||(Jo={}))[$o.OK=0]="OK",$o[$o.CANCELLED=1]="CANCELLED",$o[$o.UNKNOWN=2]="UNKNOWN",$o[$o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$o[$o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$o[$o.NOT_FOUND=5]="NOT_FOUND",$o[$o.ALREADY_EXISTS=6]="ALREADY_EXISTS",$o[$o.PERMISSION_DENIED=7]="PERMISSION_DENIED",$o[$o.UNAUTHENTICATED=16]="UNAUTHENTICATED",$o[$o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$o[$o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$o[$o.ABORTED=10]="ABORTED",$o[$o.OUT_OF_RANGE=11]="OUT_OF_RANGE",$o[$o.UNIMPLEMENTED=12]="UNIMPLEMENTED",$o[$o.INTERNAL=13]="INTERNAL",$o[$o.UNAVAILABLE=14]="UNAVAILABLE",$o[$o.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rs=function(){function t(t,e){this.D=t,this.root=e||os.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,os.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,os.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new is(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new is(this.root,t,this.D,!1)},t.prototype.dt=function(){return new is(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new is(this.root,t,this.D,!0)},t}(),is=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),os=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.ct=function(){return this.right.P()?this.key:this.right.ct()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.yt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.Vt()||i.left.left.Vt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.bt()),i.right.P()||i.right.Vt()||i.right.left.Vt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.Vt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.St()),t.left.Vt()&&t.left.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.right.Vt()&&(t=t.Dt()),t},t.prototype.yt=function(){var t=this.Dt();return t.right.left.Vt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.Vt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.Vt()&&this.left.Vt())throw go();if(this.right.Vt())throw go();var t=this.left.Nt();if(t!==this.right.Nt())throw go();return t+(this.Vt()?0:1)},t}();os.EMPTY=null,os.RED=!0,os.at=!1,os.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw go()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new os(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ht=function(){return null},t.prototype.ct=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ss=function(){function t(t){this.D=t,this.data=new rs(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.kt=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new us(this.data._t())},t.prototype.ft=function(t){return new us(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),us=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),as=new rs(Bo.D);function cs(){return as}function hs(){return cs()}var fs=new rs(Bo.D);function ls(){return fs}var ps=new rs(Bo.D),ds=new ss(Bo.D);function vs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ds,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ys=new ss(Io);function gs(){return ys}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ms=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Bo.D(e.key,n.key)}:function(t,e){return Bo.D(t.key,e.key)},this.$t=ls(),this.Lt=new rs(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ht()},t.prototype.last=function(){return this.Lt.ct()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),bs=function(){function t(){this.qt=new rs(Bo.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):go():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ut((function(e,n){t.push(n)})),t},t}(),ws=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=u}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ms.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Da(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Es=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Jt=r,this.Yt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,Is.Zt(e,n)),new t(Mo.min(),r,gs(),cs(),vs())},t}(),Is=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Ao.u,n,vs(),vs(),vs())},t}(),_s=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Ts=function(t,e){this.targetId=t,this.oe=e},As=function(t,e,n,r){void 0===n&&(n=Ao.u),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ns=function(){function t(){this.ae=0,this.he=xs(),this.ce=Ao.u,this.ue=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ce=t)},t.prototype.we=function(){var t=vs(),e=vs(),n=vs();return this.he.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:go()}})),new Is(this.ce,this.ue,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.he=xs()},t.prototype.Te=function(t,e){this.le=!0,this.he=this.he.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.he=this.he.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.ue=!0},t}(),Ss=function(){function t(t){this.Pe=t,this.ge=new Map,this.Ve=cs(),this.ye=Ds(),this.pe=new ss(Io)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof la?this.ve(r,t.re):t.re instanceof pa&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:go()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.ke=function(t){var e=t.targetId,n=t.oe.count,r=this.Oe(e);if(r){var i=r.target;if(Qo(i))if(0===n){var o=new Bo(i.path);this.Se(e,o,new pa(o,Mo.min()))}else mo(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.te&&Qo(o.target)){var s=new Bo(o.target.path);null!==e.Ve.get(s)||e.Le(i,s)||e.Se(i,s,new pa(s,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=vs();this.ye.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.Oe(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Es(t,n,this.pe,this.Ve,r);return this.Ve=cs(),this.ye=Ds(),this.pe=new ss(Io),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.Ve=this.Ve.ot(e.key,e),this.ye=this.ye.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.ye=this.ye.ot(e,this.Be(e).delete(t)),n&&(this.Ve=this.Ve.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new Ns,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.ye.get(t);return e||(e=new ss(Io),this.ye=this.ye.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.Oe(t);return e||lo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new Ns),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return new rs(Bo.D)}function xs(){return new rs(Bo.D)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ks(t){var e=t.mapValue.fields.__previous_value__;return Os(e)?ks(e):e}function Ps(t){var e=qs(t.mapValue.fields.__local_write_time__.timestampValue);return new Vo(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ls=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Os(t)?4:10:go()}function Cs(t,e){var n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ps(t).isEqual(Ps(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=qs(t.timestampValue),r=qs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Gs(t.bytesValue).isEqual(Gs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Bs(t.geoPointValue.latitude)===Bs(e.geoPointValue.latitude)&&Bs(t.geoPointValue.longitude)===Bs(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bs(t.integerValue)===Bs(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Bs(t.doubleValue),r=Bs(e.doubleValue);return n===r?zo(n)===zo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _o(t.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Po(n)!==Po(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cs(n[i],r[i])))return!1;return!0}(t,e);default:return go()}}function Vs(t,e){return void 0!==(t.values||[]).find((function(t){return Cs(t,e)}))}function Ms(t,e){var n=Rs(t),r=Rs(e);if(n!==r)return Io(n,r);switch(n){case 0:return 0;case 1:return Io(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Bs(t.integerValue||t.doubleValue),r=Bs(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Us(t.timestampValue,e.timestampValue);case 4:return Us(Ps(t),Ps(e));case 5:return Io(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Gs(t),r=Gs(e);return n.h(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Io(n[i],r[i]);if(0!==o)return o}return Io(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Io(Bs(t.latitude),Bs(e.latitude));return 0!==n?n:Io(Bs(t.longitude),Bs(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ms(n[i],r[i]);if(o)return o}return Io(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Io(r[s],o[s]);if(0!==u)return u;var a=Ms(n[r[s]],i[o[s]]);if(0!==a)return a}return Io(r.length,o.length)}(t.mapValue,e.mapValue);default:throw go()}}function Us(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Io(t,e);var n=qs(t),r=qs(e),i=Io(n.seconds,r.seconds);return 0!==i?i:Io(n.nanos,r.nanos)}function js(t){return Fs(t)}function Fs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=qs(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Gs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Bo.J(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Fs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Fs(t.fields[o])}return e+"}"}(t.mapValue):go();var e,n}function qs(t){if(mo(!!t),"string"==typeof t){var e=0,n=Ls.exec(t);if(mo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bs(t.seconds),nanos:Bs(t.nanos)}}function Bs(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Gs(t){return"string"==typeof t?Ao.fromBase64String(t):Ao.fromUint8Array(t)}function zs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Ks(t){return!!t&&"integerValue"in t}function Hs(t){return!!t&&"arrayValue"in t}function Ws(t){return!!t&&"nullValue"in t}function Xs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ys(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs={asc:"ASCENDING",desc:"DESCENDING"},Js={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$s=function(t,e){this._=t,this.Ke=e};function Zs(t){return{integerValue:""+t}}function tu(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zo(e)?"-0":e}}function eu(t,e){return Ko(e)?Zs(e):tu(t,e)}function nu(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ru(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function iu(t,e){return nu(t,e.v())}function ou(t){return mo(!!t),Mo.V(function(t){var e=qs(t);return new Vo(e.seconds,e.nanos)}(t))}function su(t,e){return function(t){return new jo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function uu(t){var e=jo.q(t);return mo(Ou(e)),e}function au(t,e){return su(t._,e.path)}function cu(t,e){var n=uu(e);return mo(n.get(1)===t._.projectId),mo(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Bo(pu(n))}function hu(t,e){return su(t._,e)}function fu(t){var e=uu(t);return 4===e.length?jo.U():pu(e)}function lu(t){return new jo(["projects",t._.projectId,"databases",t._.database]).B()}function pu(t){return mo(t.length>4&&"documents"===t.get(4)),t.N(5)}function du(t,e,n){return{name:au(t,e),fields:n.proto.mapValue.fields}}function vu(t,e){var n;if(e instanceof ta)n={update:du(t,e.key,e.value)};else if(e instanceof sa)n={delete:au(t,e.key)};else if(e instanceof ea)n={update:du(t,e.key,e.data),updateMask:xu(e.Qe)};else if(e instanceof ra)n={transform:{document:au(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Cu)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vu)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof Uu)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof Fu)return{fieldPath:e.field.B(),increment:n.We};throw go()}(0,t)}))}};else{if(!(e instanceof ua))return go();n={verify:au(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:iu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:go()}(t,e.Ge)),n}function yu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Hu.updateTime(ou(t.updateTime)):void 0!==t.exists?Hu.exists(t.exists):Hu.ze()}(e.currentDocument):Hu.ze();if(e.update){e.update.name;var r=cu(t,e.update.name),i=new aa({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Gu(e.map((function(t){return qo.G(t)})))}(e.updateMask);return new ea(r,i,o,n)}return new ta(r,i,n)}if(e.delete){var s=cu(t,e.delete);return new sa(s,n)}if(e.transform){var u=cu(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)mo("REQUEST_TIME"===e.setToServerValue),n=new Cu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Vu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Uu(i)}else"increment"in e?n=new Fu(t,e.increment):go();var o=qo.G(e.fieldPath);return new zu(o,n)}(t,e)}));return mo(!0===n.exists),new ra(u,a)}if(e.verify){var c=cu(t,e.verify);return new ua(c,n)}return go()}function gu(t,e){return{documents:[hu(t,e.path)]}}function mu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hu(t,r.F()),n.structuredQuery.from=[{collectionId:r.O()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Xs(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NAN"}};if(Ws(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xs(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NOT_NAN"}};if(Ws(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(t.field),op:Tu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Au(t.field),direction:_u(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||Go(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Eu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Eu(e.endAt)),n}function bu(t){var e=fu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=wu(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Ha(Nu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Go(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Iu(n.startAt));var h=null;return n.endAt&&(h=Iu(n.endAt)),Ta(ya(e,i,u,s,a,"F",c,h))}function wu(t){return t?void 0!==t.unaryFilter?[Du(t)]:void 0!==t.fieldFilter?[Su(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return wu(t)})).reduce((function(t,e){return t.concat(e)})):go():[]}function Eu(t){return{before:t.before,values:t.position}}function Iu(t){var e=!!t.before,n=t.values||[];return new Ba(n,e)}function _u(t){return Qs[t]}function Tu(t){return Js[t]}function Au(t){return{fieldPath:t.B()}}function Nu(t){return qo.G(t.fieldPath)}function Su(t){return La.create(Nu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return go()}}(t.fieldFilter.op),t.fieldFilter.value)}function Du(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Nu(t.unaryFilter.field);return La.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Nu(t.unaryFilter.field);return La.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Nu(t.unaryFilter.field);return La.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Nu(t.unaryFilter.field);return La.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return go()}}function xu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function Ou(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ku=function(){this.He=void 0};function Pu(t,e,n){return t instanceof Cu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Vu?Mu(t,e):t instanceof Uu?ju(t,e):function(t,e){var n=Ru(t,e),r=qu(n)+qu(t.We);return Ks(n)&&Ks(t.We)?Zs(r):tu(t.serializer,r)}(t,e)}function Lu(t,e,n){return t instanceof Vu?Mu(t,e):t instanceof Uu?ju(t,e):n}function Ru(t,e){return t instanceof Fu?Ks(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e}(ku),Vu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Ct(e,t),e}(ku);function Mu(t,e){for(var n=Bu(e),r=function(t){n.some((function(e){return Cs(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Uu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Ct(e,t),e}(ku);function ju(t,e){for(var n=Bu(e),r=function(t){n=n.filter((function(e){return!Cs(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return Ct(e,t),e}(ku);function qu(t){return Bs(t.integerValue||t.doubleValue)}function Bu(t){return Hs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gu=function(){function t(t){this.fields=t,t.sort(qo.D)}return t.prototype.Je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return _o(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),zu=function(t,e){this.field=t,this.transform=e},Ku=function(t,e){this.version=t,this.transformResults=e},Hu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Wu(t,e){return void 0!==t.updateTime?e instanceof la&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof la}var Xu=function(){};function Yu(t,e,n){return t instanceof ta?function(t,e,n){return new la(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ea?function(t,e,n){if(!Wu(t.Ge,e))return new da(t.key,n.version);var r=na(t,e);return new la(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ra?function(t,e,n){if(mo(null!=n.transformResults),!Wu(t.Ge,e))return new da(t.key,n.version);var r=ia(t,e),i=function(t,e,n){var r=[];mo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof la&&(u=e.field(o.field)),r.push(Lu(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=oa(t,r.data(),i);return new la(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new pa(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Qu(t,e,n,r){return t instanceof ta?function(t,e){if(!Wu(t.Ge,e))return e;var n=Zu(e);return new la(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof ea?function(t,e){if(!Wu(t.Ge,e))return e;var n=Zu(e),r=na(t,e);return new la(t.key,n,r,{Ye:!0})}(t,e):t instanceof ra?function(t,e,n,r){if(!Wu(t.Ge,e))return e;var i=ia(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof la&&(c=n.field(u.field)),null===c&&r instanceof la&&(c=r.field(u.field)),i.push(Pu(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=oa(t,i.data(),o);return new la(t.key,i.version,s,{Ye:!0})}(t,e,r,n):function(t,e){return Wu(t.Ge,e)?new pa(t.key,Mo.min()):e}(t,e)}function Ju(t,e){return t instanceof ra?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof la?e.field(o.field):void 0,u=Ru(o.transform,s||null);null!=u&&(n=null==n?(new ca).set(o.field,u):n.set(o.field,u))}return n?n.Xe():null}(t,e):null}function $u(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||_o(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Vu&&e instanceof Vu||t instanceof Uu&&e instanceof Uu?_o(t.elements,e.elements,Cs):t instanceof Fu&&e instanceof Fu?Cs(t.We,e.We):t instanceof Cu&&e instanceof Cu}(t.transform,e.transform)}(t,e)})))}function Zu(t){return t instanceof la?t.version:Mo.min()}var ta=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return Ct(e,t),e}(Xu),ea=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return Ct(e,t),e}(Xu);function na(t,e){return function(t,e){var n=new ca(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof la?e.data():aa.empty())}var ra=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=Hu.exists(!0),r}return Ct(e,t),e}(Xu);function ia(t,e){return e}function oa(t,e,n){for(var r=new ca(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var sa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return Ct(e,t),e}(Xu),ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return Ct(e,t),e}(Xu),aa=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ys(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},t.prototype.isEqual=function(t){return Cs(this.proto,t.proto)},t}(),ca=function(){function t(t){void 0===t&&(t=aa.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Rs(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.O(),e)},t.prototype.Xe=function(){var t=this.nn(qo.U(),this.tn);return null!=t?new aa(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=Ys(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ha(t){var e=[];return Lo(t.fields||{},(function(t,n){var r=new qo([t]);if(Ys(n)){var i=ha(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Gu(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var fa=function(t,e){this.key=t,this.version=e},la=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Ct(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(fa),pa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Ct(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fa),da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fa),va=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=u,this.hn=null,this.cn=null,this.startAt,this.endAt};function ya(t,e,n,r,i,o,s,u){return new va(t,e,n,r,i,o,s,u)}function ga(t){return new va(t)}function ma(t){return!Go(t.limit)&&"F"===t.an}function ba(t){return!Go(t.limit)&&"L"===t.an}function wa(t){return t.on.length>0?t.on[0].field:null}function Ea(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function Ia(t){return null!==t.collectionGroup}function _a(t){var e=bo(t);if(null===e.hn){e.hn=[];var n=Ea(e),r=wa(e);if(null!==n&&null===r)n.W()||e.hn.push(new Ha(n)),e.hn.push(new Ha(qo.j(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var u=s[o];e.hn.push(u),u.field.W()&&(i=!0)}if(!i){var a=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.hn.push(new Ha(qo.j(),a))}}}return e.hn}function Ta(t){var e=bo(t);if(!e.cn)if("F"===e.an)e.cn=Wo(e.path,e.collectionGroup,_a(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=_a(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ha(o.field,s))}var u=e.endAt?new Ba(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ba(e.startAt.position,!e.startAt.before):null;e.cn=Wo(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.cn}function Aa(t,e,n){return new va(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Na(t,e){return new va(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Sa(t,e){return new va(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Da(t,e){return Yo(Ta(t),Ta(e))&&t.an===e.an}function xa(t){return Xo(Ta(t))+"|lt:"+t.an}function Oa(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+js(e.value);var e})).join(", ")+"]"),Go(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ga(t.startAt)),t.endAt&&(e+=", endAt: "+Ga(t.endAt)),"Target("+e+")"}(Ta(t))+"; limitType="+t.an+")"}function ka(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Y(t.collectionGroup)&&t.path.M(n):Bo.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!za(t.startAt,_a(t),e))&&(!t.endAt||!za(t.endAt,_a(t),e))}(t,e)}function Pa(t){return function(e,n){for(var r=!1,i=0,o=_a(t);i<o.length;i++){var s=o[i],u=Wa(s,e,n);if(0!==u)return u;r=r||s.field.W()}return 0}}var La=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Ct(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new Ra(t,n,r):"array-contains"===n?new Ua(t,r):"in"===n?new ja(t,r):"not-in"===n?new Fa(t,r):"array-contains-any"===n?new qa(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Ca(t,n):new Va(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(Ms(e,this.value)):null!==e&&Rs(this.value)===Rs(e)&&this._n(Ms(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return go()}},e.prototype.un=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ra=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Bo.J(r.referenceValue),i}return Ct(e,t),e.prototype.matches=function(t){var e=Bo.D(t.key,this.key);return this._n(e)},e}(La),Ca=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ma("in",n),r}return Ct(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(La),Va=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ma("not-in",n),r}return Ct(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(La);function Ma(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Bo.J(t.referenceValue)}))}var Ua=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Ct(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Hs(e)&&Vs(e.arrayValue,this.value)},e}(La),ja=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Ct(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Vs(this.value.arrayValue,e)},e}(La),Fa=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Ct(e,t),e.prototype.matches=function(t){if(Vs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Vs(this.value.arrayValue,e)},e}(La),qa=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Ct(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Hs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Vs(e.value.arrayValue,t)}))},e}(La),Ba=function(t,e){this.position=t,this.before=e};function Ga(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return js(t)})).join(",")}function za(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.W()?Bo.D(Bo.J(s.referenceValue),n.key):Ms(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ka(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Cs(t.position[n],e.position[n]))return!1;return!0}var Ha=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Wa(t,e,n){var r=t.field.W()?Bo.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ms(r,i):go()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return go()}}function Xa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ya=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qa=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&lo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.Vn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.yn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),Ja=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&go(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.kn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.On=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.kn(r)},t}(),$a=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n(l())&&po("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return lo("SimpleDb","Removing database:",t),ic(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=l(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return Vt(this,void 0,void 0,(function(){var e,n=this;return Mt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(lo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new tc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new co(ao.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new tc(t,n))},i.onupgradeneeded=function(t){lo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){lo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Vt(this,void 0,void 0,(function(){var i,o,s,u,a;return Mt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return Mt(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=f.sent(),e=nc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Ja.reject(t)})).xn(),a={},s.catch((function(){})),[4,e.Gn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,lo("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Za=function(){function t(t){this.zn=t,this.Hn=!1,this.Jn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yn",{get:function(){return this.Jn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Jn=t},t.prototype.delete=function(){return ic(this.zn.delete())},t}(),tc=function(t){function e(e,n){var r=this;return(r=t.call(this,ao.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Ct(e,t),e}(co);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){return"IndexedDbTransactionError"===t.name}var nc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new Ya,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new tc(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=sc(e.target.error);n.Zn.reject(new tc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new tc(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(lo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new rc(e)},t}(),rc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(lo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(lo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ic(n)},t.prototype.add=function(t){return lo("SimpleDb","ADD",this.store.name,t,t),ic(this.store.add(t))},t.prototype.get=function(t){var e=this;return ic(this.store.get(t)).next((function(n){return void 0===n&&(n=null),lo("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return lo("SimpleDb","DELETE",this.store.name,t),ic(this.store.delete(t))},t.prototype.count=function(){return lo("SimpleDb","COUNT",this.store.name),ic(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){lo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new Ja((function(n,r){e.onerror=function(t){var e=sc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new Ja((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Za(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ja){var u=s.catch((function(t){return o.done(),Ja.reject(t)}));n.push(u)}o.Sn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return Ja.kn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ic(t){return new Ja((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=sc(t.target.error);n(e)}}))}var oc=!1;function sc(t){var e=$a.$n(l());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new co("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return oc||(oc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(){return"undefined"!=typeof window?window:null}function ac(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cc=function(){function t(t,e,n,r,i){this.hs=t,this.dn=e,this.cs=n,this.op=r,this.us=i,this.ls=new Ya,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new co(ao.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.hs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.us(this),clearTimeout(this.fs),this.fs=null)},t}(),hc=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.Vs=new Qa(this,"async_queue_retry"),this.ys=function(){var e=ac();e&&lo("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Vs.yn()};var e=ac();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=ac();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return Vt(this,void 0,void 0,(function(){var t,e=this;return Mt(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.Vs.reset(),[3,4];case 3:if(!ec(t=n.sent()))throw t;return lo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.Vs.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,po("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.Vn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=cc._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&go()},t.prototype.Fs=function(){},t.prototype.ks=function(){return Vt(this,void 0,void 0,(function(){var t;return Mt(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Os=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.ks().then((function(){e.As.sort((function(t,e){return t.cs-e.cs}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.ks()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function fc(t,e){if(po("AsyncQueue",e+": "+t),ec(t))return new co(ao.UNAVAILABLE,e+": "+t);throw t}var lc=function(){this.Ls=void 0,this.listeners=[]},pc=function(){this.Bs=new Co((function(t){return xa(t)}),Da),this.onlineState="Unknown",this.qs=new Set};function dc(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Mt(this,(function(c){switch(c.label){case 0:if(n=bo(t),r=e.query,i=!1,(o=n.Bs.get(r))||(i=!0,o=new lc),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Us(r)];case 2:return s.Ls=c.sent(),[3,4];case 3:return u=c.sent(),a=fc(u,"Initialization of query '"+Oa(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.Bs.set(r,o),o.listeners.push(e),e.Ks(n.onlineState),o.Ls&&e.Qs(o.Ls)&&mc(n),[2]}}))}))}function vc(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s;return Mt(this,(function(u){return n=bo(t),r=e.query,i=!1,(o=n.Bs.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.Bs.delete(r),n.Ws(r))]:[2]}))}))}function yc(t,e){for(var n=bo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.Bs.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Qs(s)&&(r=!0);a.Ls=s}}r&&mc(n)}function gc(t,e,n){var r=bo(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function mc(t){t.qs.forEach((function(t){t.next()}))}var bc=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ws(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Js(t,this.onlineState)&&(this.Ys(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Js(this.zs,t)&&(this.Ys(this.zs),e=!0),e},t.prototype.Js=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Ys=function(t){t=ws.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),wc=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wc.UNAUTHENTICATED=new wc(null),wc.ei=new wc("google-credentials-uid"),wc.ni=new wc("first-party-uid");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ec=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function Ic(t,e){return"firestore_clients_"+t+"_"+e}function _c(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Tc(t,e){return"firestore_targets_"+t+"_"+e}Ec.ai=-1;var Ac=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.hi=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new co(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(po("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Nc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.hi=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new co(r.error.code,r.error.message)),i?new t(e,r.state,o):(po("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.hi=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=gs(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ko(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(po("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Dc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.hi=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(po("SharedClientState","Failed to parse online state: "+e),null)},t}(),xc=function(){function t(){this.activeTargetIds=gs()}return t.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Oc=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.Ei.bind(this),this.Ti=new rs(Io),this.Ii=!1,this.mi=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=Ic(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new xc),this.Pi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.gi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Vi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Vt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return Mt(this,(function(l){switch(l.label){case 0:return[4,this.fi.pi()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._i&&(i=this.getItem(Ic(this.persistenceKey,r)))&&(o=Sc.hi(r,i))&&(this.Ti=this.Ti.ot(o.clientId,o));for(this.bi(),(s=this.storage.getItem(this.yi))&&(u=this.vi(s))&&this.Si(u),a=0,c=this.mi;a<c.length;a++)h=c[a],this.Ei(h);return this.mi=[],this.window.addEventListener("unload",(function(){return f.Di()})),this.Ii=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.xi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Fi=function(t){this.ki(t,"pending")},t.prototype.Oi=function(t,e,n){this.ki(t,e,n),this.Mi(t)},t.prototype.$i=function(t){var e="not-current";if(this.xi(t)){var n=this.storage.getItem(Tc(this.persistenceKey,t));if(n){var r=Nc.hi(t,n);r&&(e=r.state)}}return this.Li.ui(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(Tc(this.persistenceKey,t))},t.prototype.Ki=function(t,e,n){this.Qi(t,e,n)},t.prototype.Wi=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.Fi(t)}))},t.prototype.ji=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ii&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ii=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return lo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){lo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){lo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ei=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(lo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void po("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return Vt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Mt(this,(function(u){if(this.Ii){if(null!==n.key)if(this.Pi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Ji(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(r=this.Yi(n.key,n.newValue)))return[2,this.Xi(r)]}else if(this.Vi.test(n.key)){if(null!==n.newValue&&(i=this.Zi(n.key,n.newValue)))return[2,this.tr(i)]}else if(n.key===this.yi){if(null!==n.newValue&&(o=this.vi(n.newValue)))return[2,this.Si(o)]}else n.key===this.Ri&&(s=function(t){var e=Ec.ai;if(null!=t)try{var n=JSON.parse(t);mo("number"==typeof n),e=n}catch(t){po("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ec.ai&&this.si(s)}else this.mi.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ci())},t.prototype.ki=function(t,e,n){var r=new Ac(this.currentUser,t,e,n),i=_c(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},t.prototype.Mi=function(t){var e=_c(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(e))},t.prototype.Qi=function(t,e,n){var r=Tc(this.persistenceKey,t),i=new Nc(t,e,n);this.setItem(r,i.ci())},t.prototype.zi=function(t){var e=this.Pi.exec(t);return e?e[1]:null},t.prototype.Ji=function(t,e){var n=this.zi(t);return Sc.hi(n,e)},t.prototype.Yi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ac.hi(new wc(i),r,e)},t.prototype.Zi=function(t,e){var n=this.Vi.exec(t),r=Number(n[1]);return Nc.hi(r,e)},t.prototype.vi=function(t){return Dc.hi(t)},t.prototype.Xi=function(t){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(lo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fi.sr(s,u).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=gs();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),kc=function(){function t(){this.ir=new xc,this.rr={},this.di=null,this.si=null}return t.prototype.Fi=function(t){},t.prototype.Oi=function(t,e,n){},t.prototype.$i=function(t){return this.ir.ui(t),this.rr[t]||"not-current"},t.prototype.Ki=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.xi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new xc,Promise.resolve()},t.prototype.Wi=function(t,e,n){},t.prototype.ji=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Pc=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.hr=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Yu(o,e,r[i]))}return e},t.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Qu(i,e,e,this.ar))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Qu(a,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ur(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),vs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_o(this.mutations,t.mutations,(function(t,e){return $u(t,e)}))&&_o(this.baseMutations,t.baseMutations,(function(t,e){return $u(t,e)}))},t}(),Lc=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.cr=n,this.dr=r}return t.from=function(e,n,r){mo(e.mutations.length===r.length);for(var i=ps,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Rc=function(){function t(){this.wr=new Co((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Er=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Ir=function(t,e){this.mr(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.mr(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.mr();var n=this.wr.get(e);return void 0!==n?Ja.resolve(n):this.Pr(t,e)},t.prototype.getEntries=function(t,e){return this.gr(t,e)},t.prototype.apply=function(t){return this.mr(),this.Er=!0,this.Vr(t)},t.prototype.mr=function(){},t}(),Cc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vc=function(){function t(){this.yr=[]}return t.prototype.pr=function(t){this.yr.push(t)},t.prototype.br=function(){this.yr.forEach((function(t){return t()}))},t}(),Mc=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ur(e,t);return t}))},t.prototype.kr=function(t,e,n){var r=hs();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ur(t,e);r=r.ot(t,e)})),r},t.prototype.Or=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.$r(t,e).next((function(r){var i=n.kr(t,e,r),o=cs();return i.forEach((function(t,e){e||(e=new pa(t,Mo.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return Bo.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):Ia(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new Bo(e)).next((function(t){var e=ls();return t instanceof la&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=ls();return this.Dr.Kr(t,i).next((function(s){return Ja.forEach(s,(function(s){var u=function(t,e){return new va(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,u,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Qr(t,e)})).next((function(e){return i=e,o.Wr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=Qu(a,h,h,o.ar);r=f instanceof la?r.ot(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){ka(e,n)||(r=r.remove(t))})),r}))},t.prototype.Wr=function(t,e,n){for(var r=vs(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof ea&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof la&&(c=c.ot(t,e))})),c}))},t}(),Uc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Gr=r}return t.zr=function(e,n){for(var r=vs(),i=vs(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Io(n,i);return 0===s?Io(r,o):s}var Fc=function(){function t(t){this.Hr=t,this.buffer=new ss(jc),this.Jr=0}return t.prototype.Yr=function(){return++this.Jr},t.prototype.Xr=function(t){var e=[t,this.Yr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();jc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),qc={Zr:!1,eo:0,no:0,so:0},Bc=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.ho,t.co)},t}();Bc.uo=-1,Bc.lo=1048576,Bc._o=41943040,Bc.ho=10,Bc.co=1e3,Bc.fo=new Bc(Bc._o,Bc.ho,Bc.co),Bc.do=new Bc(Bc.uo,0,0);var Gc=function(){function t(t,e){this.wo=t,this.hs=e,this.Eo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==Bc.uo&&this.Io(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ii",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Io=function(t){var e=this,n=this.Eo?3e5:6e4;lo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.hs.Vn("lru_garbage_collection",n,(function(){return Vt(e,void 0,void 0,(function(){var e;return Mt(this,(function(n){switch(n.label){case 0:this.To=null,this.Eo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mo(this.wo)];case 2:return n.sent(),[3,7];case 3:return ec(e=n.sent())?(lo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,cf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Io(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),zc=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vo=function(t,e){var n=this;if(0===e)return Ja.resolve(Ec.ai);var r=new Fc(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.yo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===Bc.uo?(lo("LruGarbageCollector","Garbage collection skipped; disabled"),Ja.resolve(qc)):this.So(t).next((function(r){return r<n.params.io?(lo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),qc):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>c.params.oo?(lo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.oo+" from "+e),r=c.params.oo):r=e,o=Date.now(),c.Vo(t,r)})).next((function(r){return n=r,s=Date.now(),c.po(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.bo(t,n)})).next((function(t){return a=Date.now(),fo()<=K.DEBUG&&lo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),Ja.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Wc(e)),e=Hc(t.get(n),e);return Wc(e)}function Hc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Wc(t){return t+""}function Xc(t){var e=t.length;if(mo(e>=2),2===e)return mo(""===t.charAt(0)&&""===t.charAt(1)),jo.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&go(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:go()}o=s+2}return new jo(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yc=function(t){this.Co=t};function Qc(t,e){if(e.document)return function(t,e,n){var r=cu(t,e.name),i=ou(e.updateTime),o=new aa({mapValue:{fields:e.fields}});return new la(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Bo.Z(e.noDocument.path),r=eh(e.noDocument.readTime);return new pa(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Bo.Z(e.unknownDocument.path),o=eh(e.unknownDocument.version);return new da(i,o)}return go()}function Jc(t,e,n){var r=$c(n),i=e.key.path.F().L();if(e instanceof la){var o=function(t,e){return{name:au(t,e.key),fields:e.rn().mapValue.fields,updateTime:nu(t,e.version.v())}}(t.Co,e),s=e.hasCommittedMutations;return new Sh(null,null,o,s,r,i)}if(e instanceof pa){var u=e.key.path.L(),a=th(e.version),c=e.hasCommittedMutations;return new Sh(null,new Ah(u,a),null,c,r,i)}if(e instanceof da){var h=e.key.path.L(),f=th(e.version);return new Sh(new Nh(h,f),null,null,!0,r,i)}return go()}function $c(t){var e=t.v();return[e.seconds,e.nanoseconds]}function Zc(t){var e=new Vo(t[0],t[1]);return Mo.V(e)}function th(t){var e=t.v();return new wh(e.seconds,e.nanoseconds)}function eh(t){var e=new Vo(t.seconds,t.nanoseconds);return Mo.V(e)}function nh(t,e){var n=(e.baseMutations||[]).map((function(e){return yu(t.Co,e)})),r=e.mutations.map((function(e){return yu(t.Co,e)})),i=Vo.fromMillis(e.localWriteTimeMs);return new Pc(e.batchId,i,n,r)}function rh(t){var e,n,r=eh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?eh(t.lastLimboFreeSnapshotVersion):Mo.min();return void 0!==t.query.documents?(mo(1===(n=t.query).documents.length),e=Ta(ga(fu(n.documents[0])))):e=bu(t.query),new Zo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ao.fromBase64String(t.resumeToken))}function ih(t,e){var n,r=th(e.nt),i=th(e.lastLimboFreeSnapshotVersion);n=Qo(e.target)?gu(t.Co,e.target):mu(t.Co,e.target);var o=e.resumeToken.toBase64();return new xh(e.targetId,Xo(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.xo={}}return t.Fo=function(e,n,r,i){return mo(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.ko=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ah(t).rs({index:_h.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Oo=function(t,e,n,r){var i=this,o=ch(t),s=ah(t);return s.add({}).next((function(u){mo("number"==typeof u);for(var a=new Pc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return vu(t.Co,e)})),i=n.mutations.map((function(e){return vu(t.Co,e)}));return new _h(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new ss((function(t,e){return Io(t.B(),e.B())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Th.key(i.userId,d.key.path,u);f=f.add(d.key.path.F()),h.push(s.put(c)),h.push(o.put(v,Th.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Dr.Mo(t,e))})),t.pr((function(){i.xo[u]=a.keys()})),Ja.kn(h).next((function(){return a}))}))},t.prototype.$o=function(t,e){var n=this;return ah(t).get(e).next((function(t){return t?(mo(t.userId===n.userId),nh(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.xo[e]?Ja.resolve(this.xo[e]):this.$o(t,e).next((function(t){if(t){var r=t.keys();return n.xo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ah(t).rs({index:_h.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(mo(e.batchId>=r),o=nh(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ah(t).rs({index:_h.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ah(t).ts(_h.userMutationsIndex,n).next((function(t){return t.map((function(t){return nh(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=Th.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ch(t).rs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Xc(a);if(u===n.userId&&e.path.isEqual(h))return ah(t).get(c).next((function(t){if(!t)throw go();mo(t.userId===n.userId),o.push(nh(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.$r=function(t,e){var n=this,r=new ss(Io),i=[];return e.forEach((function(e){var o=Th.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=ch(t).rs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Xc(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Ja.kn(i).next((function(){return n.Ko(t,r)}))},t.prototype.Qr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Th.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new ss(Io);return ch(t).rs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Xc(a);s===n.userId&&r.M(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Ko(t,u)}))},t.prototype.Ko=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ah(t).get(e).next((function(t){if(null===t)throw go();mo(t.userId===n.userId),r.push(nh(n.serializer,t))})))})),Ja.kn(i).next((function(){return r}))},t.prototype.Qo=function(t,e){var n=this;return uh(t.Wo,this.userId,e).next((function(r){return t.pr((function(){n.jo(e.batchId)})),Ja.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.jo=function(t){delete this.xo[t]},t.prototype.zo=function(t){var e=this;return this.ko(t).next((function(n){if(!n)return Ja.resolve();var r=IDBKeyRange.lowerBound(Th.prefixForUser(e.userId)),i=[];return ch(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Xc(t[1]);i.push(o)}else r.done()})).next((function(){mo(0===i.length)}))}))},t.prototype.Ho=function(t,e){return sh(t,this.userId,e)},t.prototype.Jo=function(t){var e=this;return hh(t).get(this.userId).next((function(t){return t||new Ih(e.userId,-1,"")}))},t}();function sh(t,e,n){var r=Th.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ch(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function uh(t,e,n){var r=t.store(_h.store),i=t.store(Th.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.rs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){mo(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Th.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Ja.kn(o).next((function(){return c}))}function ah(t){return Kh.Kn(t,_h.store)}function ch(t){return Kh.Kn(t,Th.store)}function hh(t){return Kh.Kn(t,Ih.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fh=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Ir=function(t,e,n){return dh(t).put(vh(e),n)},t.prototype.Ar=function(t,e){var n=dh(t),r=vh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Yo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return dh(t).get(vh(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return dh(t).get(vh(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:yh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=hs();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=hs(),i=new rs(Bo.D);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,yh(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.P())return Ja.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return dh(t).rs({range:r},(function(t,e,r){for(var s=Bo.Z(t);o&&Bo.D(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=ls(),o=e.path.length+1,s={};if(n.isEqual(Mo.min())){var u=e.path.L();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.L(),c=$c(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Sh.collectionReadTimeIndex}return dh(t).rs(s,(function(t,n,s){if(t.length===o){var u=Qc(r.serializer,n);e.path.M(u.key.path)?u instanceof la&&ka(e,u)&&(i=i.ot(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new lh(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ph(t).get(Dh.key).next((function(t){return mo(!!t),t}))},t.prototype.Yo=function(t,e){return ph(t).put(Dh.key,e)},t.prototype.Xo=function(t){if(t){var e=Qc(this.serializer,t);return e instanceof pa&&e.version.isEqual(Mo.min())?null:e}return null},t}(),lh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ha=e,r.oa=n,r.ca=new Co((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Ct(e,t),e.prototype.Vr=function(t){var e=this,n=[],r=0,i=new ss((function(t,e){return Io(t.B(),e.B())}));return this.wr.forEach((function(o,s){var u=e.ca.get(o);if(s){var a=Jc(e.ha.serializer,s,e.readTime);i=i.add(o.path.F());var c=yh(a);r+=c-u,n.push(e.ha.Ir(t,o,a))}else if(r-=u,e.oa){var h=Jc(e.ha.serializer,new pa(o,Mo.min()),e.readTime);n.push(e.ha.Ir(t,o,h))}else n.push(e.ha.Ar(t,o))})),i.forEach((function(r){n.push(e.ha.Dr.Mo(t,r))})),n.push(this.ha.updateMetadata(t,r)),Ja.kn(n)},e.prototype.Pr=function(t,e){var n=this;return this.ha.Zo(t,e).next((function(t){return null===t?(n.ca.set(e,0),null):(n.ca.set(e,t.size),t.ta)}))},e.prototype.gr=function(t,e){var n=this;return this.ha.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ca.set(t,e)})),e}))},e}(Rc);function ph(t){return Kh.Kn(t,Dh.store)}function dh(t){return Kh.Kn(t,Sh.store)}function vh(t){return t.path.L()}function yh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw go();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(){function t(){this.ua=new mh}return t.prototype.Mo=function(t,e){return this.ua.add(e),Ja.resolve()},t.prototype.Kr=function(t,e){return Ja.resolve(this.ua.getEntries(e))},t}(),mh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.O(),n=t.F(),r=this.index[e]||new ss(jo.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.O(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ss(jo.D)).L()},t}(),bh=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;mo(n<r&&n>=0&&r<=10);var o=new nc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Eh.store)}(t),function(t){t.createObjectStore(Ih.store,{keyPath:Ih.keyPath}),t.createObjectStore(_h.store,{keyPath:_h.keyPath,autoIncrement:!0}).createIndex(_h.userMutationsIndex,_h.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Th.store)}(t),Lh(t),function(t){t.createObjectStore(Sh.store)}(t));var s=Ja.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Oh.store),t.deleteObjectStore(xh.store),t.deleteObjectStore(kh.store)}(t),Lh(t)),s=s.next((function(){return function(t){var e=t.store(kh.store),n=new kh(0,0,Mo.min().v(),0);return e.put(kh.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(_h.store).ts().next((function(n){t.deleteObjectStore(_h.store),t.createObjectStore(_h.store,{keyPath:_h.keyPath,autoIncrement:!0}).createIndex(_h.userMutationsIndex,_h.userMutationsKeyPath,{unique:!0});var r=e.store(_h.store),i=n.map((function(t){return r.put(t)}));return Ja.kn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Rh.store,{keyPath:Rh.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Dh.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Sh.store);e.createIndex(Sh.readTimeIndex,Sh.readTimeIndexPath,{unique:!1}),e.createIndex(Sh.collectionReadTimeIndex,Sh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Sh.store).rs((function(t,n){e+=yh(n)})).next((function(){var n=new Dh(e);return t.store(Dh.store).put(Dh.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Ih.store),r=t.store(_h.store);return n.ts().next((function(n){return Ja.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(_h.userMutationsIndex,i).next((function(r){return Ja.forEach(r,(function(r){mo(r.userId===n.userId);var i=nh(e.serializer,r);return uh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Oh.store),n=t.store(Sh.store);return t.store(kh.store).get(kh.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new jo(n),s=function(t){return[0,Kc(t)]}(o);r.push(e.get(s).next((function(n){return n?Ja.resolve():function(n){return e.put(new Oh(0,Kc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Ja.kn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Ph.store,{keyPath:Ph.keyPath});var n=e.store(Ph.store),r=new mh,i=function(t){if(r.add(t)){var e=t.O(),i=t.F();return n.put({collectionId:e,parent:Kc(i)})}};return e.store(Sh.store).rs({ss:!0},(function(t,e){var n=new jo(t);return i(n.F())})).next((function(){return e.store(Th.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Xc(n));return i(r.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(xh.store);return n.rs((function(t,r){var i=rh(r),o=ih(e.serializer,i);return n.put(o)}))},t}(),wh=function(t,e){this.seconds=t,this.nanoseconds=e},Eh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Eh.store="owner",Eh.key="owner";var Ih=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ih.store="mutationQueues",Ih.keyPath="userId";var _h=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};_h.store="mutations",_h.keyPath="batchId",_h.userMutationsIndex="userMutationsIndex",_h.userMutationsKeyPath=["userId","batchId"];var Th=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Kc(e)]},t.key=function(t,e,n){return[t,Kc(e),n]},t}();Th.store="documentMutations",Th.PLACEHOLDER=new Th;var Ah=function(t,e){this.path=t,this.readTime=e},Nh=function(t,e){this.path=t,this.version=e},Sh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Sh.store="remoteDocuments",Sh.readTimeIndex="readTimeIndex",Sh.readTimeIndexPath="readTime",Sh.collectionReadTimeIndex="collectionReadTimeIndex",Sh.collectionReadTimeIndexPath=["parentPath","readTime"];var Dh=function(t){this.byteSize=t};Dh.store="remoteDocumentGlobal",Dh.key="remoteDocumentGlobalKey";var xh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};xh.store="targets",xh.keyPath="targetId",xh.queryTargetsIndexName="queryTargetsIndex",xh.queryTargetsKeyPath=["canonicalId","targetId"];var Oh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Oh.store="targetDocuments",Oh.keyPath=["targetId","path"],Oh.documentTargetsIndex="documentTargetsIndex",Oh.documentTargetsKeyPath=["path","targetId"];var kh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};kh.key="targetGlobalKey",kh.store="targetGlobal";var Ph=function(t,e){this.collectionId=t,this.parent=e};function Lh(t){t.createObjectStore(Oh.store,{keyPath:Oh.keyPath}).createIndex(Oh.documentTargetsIndex,Oh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xh.store,{keyPath:xh.keyPath}).createIndex(xh.queryTargetsIndexName,xh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kh.store)}Ph.store="collectionParents",Ph.keyPath=["collectionId","parent"];var Rh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Rh.store="clientMetadata",Rh.keyPath="clientId";var Ch=Ut(Ut(Ut([Ih.store,_h.store,Th.store,Sh.store,xh.store,Eh.store,kh.store,Oh.store],[Rh.store]),[Dh.store]),[Ph.store]),Vh=function(){function t(){this.la=new mh}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e.O(),i=e.F();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:Kc(i)};return Mh(t).put(o)}return Ja.resolve()},t.prototype.Kr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[To(e),""],!1,!0);return Mh(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Xc(o.parent))}return n}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){return Kh.Kn(t,Ph.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uh=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),jh=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.Ea(t).next((function(n){var r=new Uh(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ia=function(t){return this.Ea(t).next((function(t){return Mo.V(new Vo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ma=function(t){return this.Ea(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.Ea(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.Pa(t,e).next((function(){return n.Ea(t).next((function(r){return r.targetCount+=1,n.ga(e,r),n.Ta(t,r)}))}))},t.prototype.Va=function(t,e){return this.Pa(t,e)},t.prototype.ya=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return Fh(t).delete(e.targetId)})).next((function(){return n.Ea(t)})).next((function(e){return mo(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return Fh(t).rs((function(s,u){var a=rh(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.ya(t,a)))})).next((function(){return Ja.kn(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return Fh(t).rs((function(t,n){var r=rh(n);e(r)}))},t.prototype.Ea=function(t){return qh(t).get(kh.key).next((function(t){return mo(null!==t),t}))},t.prototype.Ta=function(t,e){return qh(t).put(kh.key,e)},t.prototype.Pa=function(t,e){return Fh(t).put(ih(this.serializer,e))},t.prototype.ga=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.Ea(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=Xo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fh(t).rs({range:r,index:xh.queryTargetsIndexName},(function(t,n,r){var o=rh(n);Yo(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=Bh(t);return e.forEach((function(e){var s=Kc(e.path);i.push(o.put(new Oh(n,s))),i.push(r.No.Da(t,n,e))})),Ja.kn(i)},t.prototype.Ca=function(t,e,n){var r=this,i=Bh(t);return Ja.forEach(e,(function(e){var o=Kc(e.path);return Ja.kn([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=Bh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Bh(t),i=vs();return r.rs({range:n,ss:!0},(function(t,e,n){var r=Xc(t[1]),o=new Bo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=Kc(e.path),r=IDBKeyRange.bound([n],[To(n)],!1,!0),i=0;return Bh(t).rs({index:Oh.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return Fh(t).get(e).next((function(t){return t?rh(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){return Kh.Kn(t,xh.store)}function qh(t){return Kh.Kn(t,kh.store)}function Bh(t){return Kh.Kn(t,Oh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wo=e,r.Fa=n,r}return Ct(e,t),e}(Vc),Kh=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=u,this.ka=c,this.Oa=h,this.Ma=null,this.$a=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!t.Ln())throw new co(ao.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new Xh(this,i),this.Qa=n+"main",this.serializer=new Yc(a),this.Wa=new $a(this.Qa,10,new bh(this.serializer)),this.ja=new jh(this.No,this.serializer),this.Dr=new Vh,this.vr=function(t,e){return new fh(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===h&&po("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof zh)return $a.Kn(t.Wo,e);throw go()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new co(ao.FAILED_PRECONDITION,Gh);return t.Ha(),t.Ja(),t.Ya(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ja.ma(e)}))})).then((function(e){t.Ma=new Ec(e,t.ka)})).then((function(){t.$a=!0})).catch((function(e){return t.Wa&&t.Wa.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Ka=function(n){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(e){return this.Ii?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.Wa.jn((function(n){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.th=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return this.Ii?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Wh(e).put(new Rh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.eh(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Ka(!1)})))}))})).next((function(){return t.nh(e)})).next((function(n){return t.isPrimary&&!n?t.sh(e).next((function(){return!1})):!!n&&t.ih(e).next((function(){return!0}))}))})).catch((function(e){if(ec(e))return lo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return lo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Ka(e)})),t.isPrimary=e}))},t.prototype.eh=function(t){var e=this;return Hh(t).get(Eh.key).next((function(t){return Ja.resolve(e.rh(t))}))},t.prototype.oh=function(t){return Wh(t).delete(this.clientId)},t.prototype.ah=function(){return Vt(this,void 0,void 0,(function(){var e,n,r,i,o=this;return Mt(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.hh(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,Rh.store);return n.ts().next((function(t){var e=o.uh(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Ja.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Ga)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ga.removeItem(this.lh(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.Ya=function(){var t=this;this.qa=this.fn.Vn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ah()})).then((function(){return t.Ya()}))}))},t.prototype.rh=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nh=function(t){var e=this;return this.Oa?Ja.resolve(!0):Hh(t).get(Eh.key).next((function(n){if(null!==n&&e.hh(n.leaseTimestampMs,5e3)&&!e._h(n.ownerId)){if(e.rh(n)&&e.networkEnabled)return!0;if(!e.rh(n)){if(!n.allowTabSynchronization)throw new co(ao.FAILED_PRECONDITION,Gh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Wh(t).ts().next((function(t){return void 0===e.uh(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&lo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return Vt(this,void 0,void 0,(function(){var t=this;return Mt(this,(function(e){switch(e.label){case 0:return this.$a=!1,this.fh(),this.qa&&(this.qa.cancel(),this.qa=null),this.dh(),this.wh(),[4,this.Wa.runTransaction("shutdown","readwrite",[Eh.store,Rh.store],(function(e){var n=new zh(e,Ec.ai);return t.sh(n).next((function(){return t.oh(n)}))}))];case 1:return e.sent(),this.Wa.close(),this.Eh(),[2]}}))}))},t.prototype.uh=function(t,e){var n=this;return t.filter((function(t){return n.hh(t.updateTimeMs,e)&&!n._h(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Wh(e).ts().next((function(e){return t.uh(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Th=function(t){return oh.Fo(t,this.serializer,this.Dr,this.No)},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.Ah=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r=this;lo("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wa.runTransaction(t,o,Ch,(function(o){return i=new zh(o,r.Ma?r.Ma.next():Ec.ai),"readwrite-primary"===e?r.eh(i).next((function(t){return!!t||r.nh(i)})).next((function(e){if(!e)throw po("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Ka(!1)})),new co(ao.FAILED_PRECONDITION,Cc);return n(i)})).next((function(t){return r.ih(i).next((function(){return t}))})):r.Rh(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Rh=function(t){var e=this;return Hh(t).get(Eh.key).next((function(t){if(null!==t&&e.hh(t.leaseTimestampMs,5e3)&&!e._h(t.ownerId)&&!e.rh(t)&&!(e.Oa||e.allowTabSynchronization&&t.allowTabSynchronization))throw new co(ao.FAILED_PRECONDITION,Gh)}))},t.prototype.ih=function(t){var e=new Eh(this.clientId,this.allowTabSynchronization,Date.now());return Hh(t).put(Eh.key,e)},t.Ln=function(){return $a.Ln()},t.prototype.sh=function(t){var e=this,n=Hh(t);return n.get(Eh.key).next((function(t){return e.rh(t)?(lo("IndexedDbPersistence","Releasing primary lease."),n.delete(Eh.key)):Ja.resolve()}))},t.prototype.hh=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(po("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.dh=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ja=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e.fh(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.wh=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype._h=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.lh(t)));return lo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return po("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.fh=function(){if(this.Ga)try{this.Ga.setItem(this.lh(this.clientId),String(Date.now()))}catch(t){po("Failed to set zombie client id.",t)}},t.prototype.Eh=function(){if(this.Ga)try{this.Ga.removeItem(this.lh(this.clientId))}catch(t){}},t.prototype.lh=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Hh(t){return Kh.Kn(t,Eh.store)}function Wh(t){return Kh.Kn(t,Rh.store)}var Xh=function(){function t(t,e){this.db=t,this.wo=new zc(this,e)}return t.prototype.Po=function(t){var e=this.Ph(t);return this.db.Ih().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ph=function(t){var e=0;return this.yo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Ih().Ce(t,e)},t.prototype.yo=function(t,e){return this.gh(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return Yh(t,n)},t.prototype.Na=function(t,e,n){return Yh(t,n)},t.prototype.po=function(t,e,n){return this.db.Ih().po(t,e,n)},t.prototype.Go=function(t,e){return Yh(t,e)},t.prototype.Vh=function(t,e){return function(t,e){var n=!1;return hh(t).os((function(r){return sh(t,r,e).next((function(t){return t&&(n=!0),Ja.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.mh().ra(),i=[],o=0;return this.gh(t,(function(s,u){if(u<=e){var a=n.Vh(t,s).next((function(e){if(!e)return o++,r.Rr(t,s).next((function(){return r.Ar(s),Bh(t).delete([0,Kc(s.path)])}))}));i.push(a)}})).next((function(){return Ja.kn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Fa);return this.db.Ih().Va(t,n)},t.prototype.yh=function(t,e){return Yh(t,e)},t.prototype.gh=function(t,e){var n,r=Bh(t),i=Ec.ai;return r.rs({index:Oh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==Ec.ai&&e(new Bo(Xc(n)),i),i=u,n=s):i=Ec.ai})).next((function(){i!==Ec.ai&&e(new Bo(Xc(n)),i)}))},t.prototype.So=function(t){return this.db.mh().aa(t)},t}();function Yh(t,e){return Bh(t).put(function(t,e){return new Oh(0,Kc(t.path),e)}(e,t.Fa))}function Qh(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Jh=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new rs(Io),this.Sh=new Co((function(t){return Xo(t)}),Yo),this.Dh=Mo.min(),this.Sr=t.Th(n),this.Ch=t.mh(),this.ja=t.Ih(),this.Nh=new Mc(this.Ch,this.Sr,this.persistence.Ah()),this.ph.xh(this.Nh)}return t.prototype.mo=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bh)}))},t}();function $h(t,e){var n=bo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ch.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ja.resolve();return o.forEach((function(t){s=s.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);mo(null!==s),(!o||o.version.h(s)<0)&&(o=i.hr(t,o,n))&&r.Ir(o,n._r)}))})),s.next((function(){return t.Sr.Qo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}function Zh(t){var e=bo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ja.Ia(t)}))}function tf(t,e){var n=bo(t),r=e.nt,i=n.bh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ch.ra({oa:!0});i=n.bh;var s=[];e.zt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.ja.Ca(t,e.se,o).next((function(){return n.ja.Sa(t,e.ee,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.it(a,r).st(t.Fa);i=i.ot(o,c),function(t,e,n){return mo(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(u,c,e)&&s.push(n.ja.Va(t,c))}}}));var u=cs(),a=vs();if(e.Jt.forEach((function(t,e){a=a.add(t)})),s.push(o.getEntries(t,a).next((function(i){e.Jt.forEach((function(a,c){var h=i.get(a);c instanceof pa&&c.version.isEqual(Mo.min())?(o.Ar(a,r),u=u.ot(a,c)):null==h||c.version.h(h.version)>0||0===c.version.h(h.version)&&h.hasPendingWrites?(o.Ir(c,r),u=u.ot(a,c)):lo("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version),e.Yt.has(a)&&s.push(n.persistence.No.yh(t,a))}))}))),!r.isEqual(Mo.min())){var c=n.ja.Ia(t).next((function(e){return n.ja.Aa(t,t.Fa,r)}));s.push(c)}return Ja.kn(s).next((function(){return o.apply(t)})).next((function(){return n.Nh.Mr(t,u)}))})).then((function(t){return n.bh=i,t}))}function ef(t,e){var n=bo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function nf(t,e){var n=bo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ja.va(t,e).next((function(i){return i?(r=i,Ja.resolve(r)):n.ja.wa(t).next((function(i){return r=new Zo(e,i,0,t.Fa),n.ja.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bh.get(t.targetId);return(null===r||t.nt.h(r.nt)>0)&&(n.bh=n.bh.ot(t.targetId,t),n.Sh.set(e,t.targetId)),t}))}function rf(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o,s;return Mt(this,(function(u){switch(u.label){case 0:r=bo(t),i=r.bh.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.No.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!ec(s=u.sent()))throw s;return lo("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.bh=r.bh.remove(e),r.Sh.delete(i.target),[2]}}))}))}function of(t,e,n){var r=bo(t),i=Mo.min(),o=vs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=bo(t),i=r.Sh.get(n);return void 0!==i?Ja.resolve(r.bh.get(i)):r.ja.va(e,n)}(r,t,Ta(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ja.xa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.ph.Lr(t,e,n?i:Mo.min(),n?o:vs())})).next((function(t){return{documents:t,Fh:o}}))}))}function sf(t,e){var n=bo(t),r=bo(n.ja),i=n.bh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function uf(t){var e=bo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=bo(t),i=cs(),o=$c(n),s=dh(e),u=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Sh.readTimeIndex,range:u},(function(t,e){var n=Qc(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{kh:i,readTime:Zc(o)}}))}(e.Ch,t,e.Dh)})).then((function(t){var n=t.kh,r=t.readTime;return e.Dh=r,n}))}function af(t){return Vt(this,void 0,void 0,(function(){var e;return Mt(this,(function(n){return[2,(e=bo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=dh(t),n=Mo.min();return e.rs({index:Sh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Zc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Dh=t}))]}))}))}function cf(t){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(e){if(t.code!==ao.FAILED_PRECONDITION||t.message!==Cc)throw t;return lo("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hf=function(){function t(){this.Oh=new ss(ff.Mh),this.$h=new ss(ff.Lh)}return t.prototype.P=function(){return this.Oh.P()},t.prototype.Da=function(t,e){var n=new ff(t,e);this.Oh=this.Oh.add(n),this.$h=this.$h.add(n)},t.prototype.Bh=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.qh(new ff(t,e))},t.prototype.Uh=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Kh=function(t){var e=this,n=new Bo(new jo([])),r=new ff(n,t),i=new ff(n,t+1),o=[];return this.$h.xt([r,i],(function(t){e.qh(t),o.push(t.key)})),o},t.prototype.Qh=function(){var t=this;this.Oh.forEach((function(e){return t.qh(e)}))},t.prototype.qh=function(t){this.Oh=this.Oh.delete(t),this.$h=this.$h.delete(t)},t.prototype.Wh=function(t){var e=new Bo(new jo([])),n=new ff(e,t),r=new ff(e,t+1),i=vs();return this.$h.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new ff(t,0),n=this.Oh.kt(e);return null!==n&&t.isEqual(n.key)},t}(),ff=function(){function t(t,e){this.key=t,this.jh=e}return t.Mh=function(t,e){return Bo.D(t.key,e.key)||Io(t.jh,e.jh)},t.Lh=function(t,e){return Io(t.jh,e.jh)||Bo.D(t.key,e.key)},t}(),lf=function(t,e){this.user=e,this.type="OAuth",this.Gh={},this.Gh.Authorization="Bearer "+t},pf=function(){function t(){this.zh=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Hh=function(){},t.prototype.Jh=function(t){this.zh=t,t(wc.UNAUTHENTICATED)},t.prototype.Yh=function(){this.zh=null},t}(),df=function(){function t(t){var e=this;this.Xh=null,this.currentUser=wc.UNAUTHENTICATED,this.Zh=!1,this.tc=0,this.zh=null,this.forceRefresh=!1,this.Xh=function(){e.tc++,e.currentUser=e.ec(),e.Zh=!0,e.zh&&e.zh(e.currentUser)},this.tc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Xh):(this.Xh(null),t.get().then((function(t){e.auth=t,e.Xh&&e.auth.addAuthTokenListener(e.Xh)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.tc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.tc!==e?(lo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(mo("string"==typeof n.accessToken),new lf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Hh=function(){this.forceRefresh=!0},t.prototype.Jh=function(t){this.zh=t,this.Zh&&t(this.currentUser)},t.prototype.Yh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Xh),this.Xh=null,this.zh=null},t.prototype.ec=function(){var t=this.auth&&this.auth.getUid();return mo(null===t||"string"==typeof t),new wc(t)},t}(),vf=function(){function t(t,e){this.nc=t,this.sc=e,this.type="FirstParty",this.user=wc.ni}return Object.defineProperty(t.prototype,"Gh",{get:function(){var t={"X-Goog-AuthUser":this.sc},e=this.nc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),yf=function(){function t(t,e){this.nc=t,this.sc=e}return t.prototype.getToken=function(){return Promise.resolve(new vf(this.nc,this.sc))},t.prototype.Jh=function(t){t(wc.ni)},t.prototype.Yh=function(){},t.prototype.Hh=function(){},t}(),gf=function(){function t(t,e,n,r,i,o){this.fn=t,this.ic=n,this.rc=r,this.oc=i,this.listener=o,this.state=0,this.ac=0,this.hc=null,this.stream=null,this.Vs=new Qa(t,e)}return t.prototype.cc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.lc()},t.prototype.stop=function(){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return this.cc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype._c=function(){this.state=0,this.Vs.reset()},t.prototype.fc=function(){var t=this;this.uc()&&null===this.hc&&(this.hc=this.fn.Vn(this.ic,6e4,(function(){return t.dc()})))},t.prototype.wc=function(t){this.Ec(),this.stream.send(t)},t.prototype.dc=function(){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(t){return this.uc()?[2,this.close(0)]:[2]}))}))},t.prototype.Ec=function(){this.hc&&(this.hc.cancel(),this.hc=null)},t.prototype.close=function(t,e){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(n){switch(n.label){case 0:return this.Ec(),this.Vs.cancel(),this.ac++,3!==t?this.Vs.reset():e&&e.code===ao.RESOURCE_EXHAUSTED?(po(e.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.Vs.Rn()):e&&e.code===ao.UNAUTHENTICATED&&this.oc.Hh(),null!==this.stream&&(this.Tc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ic(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Tc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mc(this.ac),n=this.ac;this.oc.getToken().then((function(e){t.ac===n&&t.Ac(e)}),(function(n){e((function(){var e=new co(ao.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Rc(e)}))}))},t.prototype.Ac=function(t){var e=this,n=this.mc(this.ac);this.stream=this.Pc(t),this.stream.gc((function(){n((function(){return e.state=2,e.listener.gc()}))})),this.stream.Ic((function(t){n((function(){return e.Rc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.lc=function(){var t=this;this.state=4,this.Vs.Pn((function(){return Vt(t,void 0,void 0,(function(){return Mt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Rc=function(t){return lo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ac===t?n():(lo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),mf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Ct(e,t),e.prototype.Pc=function(t){return this.rc.Vc("Listen",t)},e.prototype.onMessage=function(t){this.Vs.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:go()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(mo(void 0===e||"string"==typeof e),Ao.fromBase64String(e||"")):(mo(void 0===e||e instanceof Uint8Array),Ao.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?ao.UNKNOWN:ns(t.code);return new co(e,t.message||"")}(s);n=new As(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=cu(t,a.document.name),h=ou(a.document.updateTime),f=new aa({mapValue:{fields:a.document.fields}}),l=new la(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new _s(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=cu(t,v.document),g=v.readTime?ou(v.readTime):Mo.min(),m=new pa(y,g),b=v.removedTargetIds||[];n=new _s([],b,m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var E=cu(t,w.document),I=w.removedTargetIds||[];n=new _s([],I,E,null)}else{if(!("filter"in e))return go();e.filter;var _=e.filter;_.targetId;var T=_.count||0,A=new ts(T),N=_.targetId;n=new Ts(N,A)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Mo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Mo.min():e.readTime?ou(e.readTime):Mo.min()}(t);return this.listener.yc(e,n)},e.prototype.bc=function(t){var e={};e.database=lu(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Qo(r)?{documents:gu(t,r)}:{query:mu(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=ru(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return go()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.wc(e)},e.prototype.vc=function(t){var e={};e.database=lu(this.serializer),e.removeTarget=t,this.wc(e)},e}(gf),bf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Sc=!1,s}return Ct(e,t),Object.defineProperty(e.prototype,"Dc",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Sc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Tc=function(){this.Sc&&this.Cc([])},e.prototype.Pc=function(t){return this.rc.Vc("Write",t)},e.prototype.onMessage=function(t){if(mo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Sc){this.Vs.reset();var e=function(t,e){return t&&t.length>0?(mo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ou(t.updateTime):ou(e);n.isEqual(Mo.min())&&(n=ou(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ku(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ou(t.commitTime);return this.listener.Nc(n,e)}return mo(!t.writeResults||0===t.writeResults.length),this.Sc=!0,this.listener.xc()},e.prototype.Fc=function(){var t={};t.database=lu(this.serializer),this.wc(t)},e.prototype.Cc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return vu(e.serializer,t)}))};this.wc(n)},e}(gf),wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.rc=n,i.serializer=r,i.kc=!1,i}return Ct(e,t),e.prototype.Oc=function(){if(this.kc)throw new co(ao.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mc=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.Mc(t,e,n,i)})).catch((function(t){throw t.code===ao.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.$c=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.$c(t,e,n,i)})).catch((function(t){throw t.code===ao.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.terminate=function(){this.kc=!1},e}((function(){})),Ef=function(){function t(t,e){this.hs=t,this.di=e,this.state="Unknown",this.Lc=0,this.Bc=null,this.qc=!0}return t.prototype.Uc=function(){var t=this;0===this.Lc&&(this.Kc("Unknown"),this.Bc=this.hs.Vn("online_state_timeout",1e4,(function(){return t.Bc=null,t.Qc("Backend didn't respond within 10 seconds."),t.Kc("Offline"),Promise.resolve()})))},t.prototype.Wc=function(t){"Online"===this.state?this.Kc("Unknown"):(this.Lc++,this.Lc>=1&&(this.jc(),this.Qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Kc("Offline")))},t.prototype.set=function(t){this.jc(),this.Lc=0,"Online"===t&&(this.qc=!1),this.Kc(t)},t.prototype.Kc=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qc?(po(e),this.qc=!1):lo("OnlineStateTracker",e)},t.prototype.jc=function(){null!==this.Bc&&(this.Bc.cancel(),this.Bc=null)},t}(),If=function(t,e,n,r,i){var o=this;this.Gc=t,this.zc=e,this.hs=n,this.Hc={},this.Jc=[],this.Yc=new Map,this.Xc=new Set,this.Zc=[],this.tu=i,this.tu.eu((function(t){n.ws((function(){return Vt(o,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return Pf(this)?(lo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Vt(this,void 0,void 0,(function(){var e;return Mt(this,(function(n){switch(n.label){case 0:return(e=bo(t)).Xc.add(4),[4,Tf(e)];case 1:return n.sent(),e.nu.set("Unknown"),e.Xc.delete(4),[4,_f(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.nu=new Ef(n,r)};function _f(t){return Vt(this,void 0,void 0,(function(){var e,n;return Mt(this,(function(r){switch(r.label){case 0:if(!Pf(t))return[3,4];e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Tf(t){return Vt(this,void 0,void 0,(function(){var e,n;return Mt(this,(function(r){switch(r.label){case 0:e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Af(t){return Vt(this,void 0,void 0,(function(){var e;return Mt(this,(function(n){switch(n.label){case 0:return e=bo(t),lo("RemoteStore","RemoteStore shutting down."),e.Xc.add(5),[4,Tf(e)];case 1:return n.sent(),e.tu.Di(),e.nu.set("Unknown"),[2]}}))}))}function Nf(t,e){var n=bo(t);n.Yc.has(e.targetId)||(n.Yc.set(e.targetId,e),kf(n)?Of(n):Wf(n).uc()&&Df(n,e))}function Sf(t,e){var n=bo(t),r=Wf(n);n.Yc.delete(e),r.uc()&&xf(n,e),0===n.Yc.size&&(r.uc()?r.fc():Pf(n)&&n.nu.set("Unknown"))}function Df(t,e){t.su.me(e.targetId),Wf(t).bc(e)}function xf(t,e){t.su.me(e),Wf(t).vc(e)}function Of(t){t.su=new Ss({qe:function(e){return t.Hc.qe(e)},Ue:function(e){return t.Yc.get(e)||null}}),Wf(t).start(),t.nu.Uc()}function kf(t){return Pf(t)&&!Wf(t).cc()&&t.Yc.size>0}function Pf(t){return 0===bo(t).Xc.size}function Lf(t){t.su=void 0}function Rf(t){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(e){return t.Yc.forEach((function(e,n){Df(t,e)})),[2]}))}))}function Cf(t,e){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(n){return Lf(t),kf(t)?(t.nu.Wc(e),Of(t)):t.nu.set("Unknown"),[2]}))}))}function Vf(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o;return Mt(this,(function(s){switch(s.label){case 0:if(t.nu.set("Online"),!(e instanceof As&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o;return Mt(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Yc.has(o)?[4,t.Hc.iu(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Yc.delete(o),t.su.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),lo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Mf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof _s?t.su.be(e):e instanceof Ts?t.su.ke(e):t.su.De(e),n.isEqual(Mo.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Zh(t.Gc)];case 8:return i=s.sent(),n.h(i)>=0?[4,function(t,e){var n=t.su.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Yc.get(r);i&&t.Yc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Yc.get(e);if(n){t.Yc.set(e,n.it(Ao.u,n.nt)),xf(t,e);var r=new Zo(n.target,e,1,n.sequenceNumber);Df(t,r)}})),t.Hc.ru(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return lo("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Mf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Mf(t,e,n){return Vt(this,void 0,void 0,(function(){var r=this;return Mt(this,(function(i){switch(i.label){case 0:if(!ec(e))throw e;return t.Xc.add(1),[4,Tf(t)];case 1:return i.sent(),t.nu.set("Offline"),n||(n=function(){return Zh(t.Gc)}),t.hs.Cs((function(){return Vt(r,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return lo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Xc.delete(1),[4,_f(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Uf(t,e){return e().catch((function(n){return Mf(t,n,e)}))}function jf(t){return Vt(this,void 0,void 0,(function(){var e,n,r,i,o;return Mt(this,(function(s){switch(s.label){case 0:e=bo(t),n=Xf(e),r=e.Jc.length>0?e.Jc[e.Jc.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Pf(t)&&t.Jc.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,ef(e.Gc,r)];case 3:return null===(i=s.sent())?(0===e.Jc.length&&n.fc(),[3,7]):(r=i.batchId,function(t,e){t.Jc.push(e);var n=Xf(t);n.uc()&&n.Dc&&n.Cc(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Mf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ff(e)&&qf(e),[2]}}))}))}function Ff(t){return Pf(t)&&!Xf(t).cc()&&t.Jc.length>0}function qf(t){Xf(t).start()}function Bf(t){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(e){return Xf(t).Fc(),[2]}))}))}function Gf(t){return Vt(this,void 0,void 0,(function(){var e,n,r,i;return Mt(this,(function(o){for(e=Xf(t),n=0,r=t.Jc;n<r.length;n++)i=r[n],e.Cc(i.mutations);return[2]}))}))}function zf(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i;return Mt(this,(function(o){switch(o.label){case 0:return r=t.Jc.shift(),i=Lc.from(r,e,n),[4,Uf(t,(function(){return t.Hc.ou(i)}))];case 1:return o.sent(),[4,jf(t)];case 2:return o.sent(),[2]}}))}))}function Kf(t,e){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(n){switch(n.label){case 0:return e&&Xf(t).Dc?[4,function(t,e){return Vt(this,void 0,void 0,(function(){var n,r;return Mt(this,(function(i){switch(i.label){case 0:return es(r=e.code)&&r!==ao.ABORTED?(n=t.Jc.shift(),Xf(t)._c(),[4,Uf(t,(function(){return t.Hc.au(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,jf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ff(t)&&qf(t),[2]}}))}))}function Hf(t,e){return Vt(this,void 0,void 0,(function(){var n;return Mt(this,(function(r){switch(r.label){case 0:return n=bo(t),e?(n.Xc.delete(2),[4,_f(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Xc.add(2),[4,Tf(n)]);case 3:r.sent(),n.nu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Wf(t){var e=this;return t.hu||(t.hu=function(t,e,n){var r=bo(t);return r.Oc(),new mf(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Rf.bind(null,t),Ic:Cf.bind(null,t),yc:Vf.bind(null,t)}),t.Zc.push((function(n){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return n?(t.hu._c(),kf(t)?Of(t):t.nu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.hu.stop()];case 2:e.sent(),Lf(t),e.label=3;case 3:return[2]}}))}))}))),t.hu}function Xf(t){var e=this;return t.cu||(t.cu=function(t,e,n){var r=bo(t);return r.Oc(),new bf(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Bf.bind(null,t),Ic:Kf.bind(null,t),xc:Gf.bind(null,t),Nc:zf.bind(null,t)}),t.Zc.push((function(n){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return n?(t.cu._c(),[4,jf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.cu.stop()];case 3:e.sent(),t.Jc.length>0&&(lo("RemoteStore","Stopping write stream with "+t.Jc.length+" pending writes"),t.Jc=[]),e.label=4;case 4:return[2]}}))}))}))),t.cu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Yf=function(t){this.key=t},Qf=function(t){this.key=t},Jf=function(){function t(t,e){this.query=t,this.uu=e,this.lu=null,this.te=!1,this._u=vs(),this.Qt=vs(),this.fu=Pa(t),this.du=new ms(this.fu)}return Object.defineProperty(t.prototype,"wu",{get:function(){return this.uu},enumerable:!1,configurable:!0}),t.prototype.Eu=function(t,e){var n=this,r=e?e.Tu:new bs,i=e?e.du:this.du,o=e?e.Qt:this.Qt,s=i,u=!1,a=ma(this.query)&&i.size===this.query.limit?i.last():null,c=ba(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof la?e:null;f&&(f=ka(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Ye||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Iu(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.fu(f,a)>0||c&&n.fu(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),ma(this.query)||ba(this.query))for(;s.size>this.query.limit;){var h=ma(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{du:s,Tu:r,mu:u,Qt:o}},t.prototype.Iu=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.Vr=function(t,e,n){var r=this,i=this.du;this.du=t.du,this.Qt=t.Qt;var o=t.Tu.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return go()}};return n(t)-n(e)}(t.type,e.type)||r.fu(t.doc,e.doc)})),this.Au(n);var s=e?this.Ru():[],u=0===this._u.size&&this.te?1:0,a=u!==this.lu;return this.lu=u,0!==o.length||a?{snapshot:new ws(this.query,t.du,i,o,t.Qt,0===u,a,!1),Pu:s}:{Pu:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Vr({du:this.du,Tu:new bs,Qt:this.Qt,mu:!1},!1)):{Pu:[]}},t.prototype.gu=function(t){return!this.uu.has(t)&&!!this.du.has(t)&&!this.du.get(t).Ye},t.prototype.Au=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uu=e.uu.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uu=e.uu.delete(t)})),this.te=t.te)},t.prototype.Ru=function(){var t=this;if(!this.te)return[];var e=this._u;this._u=vs(),this.du.forEach((function(e){t.gu(e.key)&&(t._u=t._u.add(e.key))}));var n=[];return e.forEach((function(e){t._u.has(e)||n.push(new Qf(e))})),this._u.forEach((function(t){e.has(t)||n.push(new Yf(t))})),n},t.prototype.Vu=function(t){this.uu=t.Fh,this._u=vs();var e=this.Eu(t.documents);return this.Vr(e,!0)},t.prototype.yu=function(){return ws.Gt(this.query,this.du,this.Qt,0===this.lu)},t}(),$f=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Zf=function(t){this.key=t,this.pu=!1},tl=function(){function t(t,e,n,r,i,o){this.Gc=t,this.bu=e,this.vu=n,this.Su=r,this.currentUser=i,this.Du=o,this.Cu={},this.Nu=new Co((function(t){return xa(t)}),Da),this.xu=new Map,this.Fu=[],this.ku=new rs(Bo.D),this.Ou=new Map,this.Mu=new hf,this.$u={},this.Lu=new Map,this.Bu=Uh.da(),this.onlineState="Unknown",this.qu=void 0}return Object.defineProperty(t.prototype,"Uu",{get:function(){return!0===this.qu},enumerable:!1,configurable:!0}),t}();function el(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Mt(this,(function(a){switch(a.label){case 0:return n=Sl(t),(o=n.Nu.get(e))?(r=o.targetId,n.Su.$i(r),i=o.view.yu(),[3,4]):[3,1];case 1:return[4,nf(n.Gc,Ta(e))];case 2:return s=a.sent(),u=n.Su.$i(s.targetId),r=s.targetId,[4,nl(n,e,r,"current"===u)];case 3:i=a.sent(),n.Uu&&Nf(n.bu,s),a.label=4;case 4:return[2,i]}}))}))}function nl(t,e,n,r){return Vt(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Mt(this,(function(h){switch(h.label){case 0:return t.Ku=function(e,n,r){return function(t,e,n,r){return Vt(this,void 0,void 0,(function(){var i,o,s;return Mt(this,(function(u){switch(u.label){case 0:return i=e.view.Eu(n),i.mu?[4,of(t.Gc,e.query,!1).then((function(t){var n=t.documents;return e.view.Eu(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.zt.get(e.targetId),s=e.view.Vr(i,t.Uu,o),[2,(pl(t,e.targetId,s.Pu),s.snapshot)]}}))}))}(t,e,n,r)},[4,of(t.Gc,e,!0)];case 1:return i=h.sent(),o=new Jf(e,i.Fh),s=o.Eu(i.documents),u=Is.Zt(n,r&&"Offline"!==t.onlineState),a=o.Vr(s,t.Uu,u),pl(t,n,a.Pu),c=new $f(e,n,o),[2,(t.Nu.set(e,c),t.xu.has(n)?t.xu.get(n).push(e):t.xu.set(n,[e]),a.snapshot)]}}))}))}function rl(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i;return Mt(this,(function(o){switch(o.label){case 0:return n=bo(t),r=n.Nu.get(e),(i=n.xu.get(r.targetId)).length>1?[2,(n.xu.set(r.targetId,i.filter((function(t){return!Da(t,e)}))),void n.Nu.delete(e))]:n.Uu?(n.Su.Bi(r.targetId),n.Su.xi(r.targetId)?[3,2]:[4,rf(n.Gc,r.targetId,!1).then((function(){n.Su.Ui(r.targetId),Sf(n.bu,r.targetId),fl(n,r.targetId)})).catch(cf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return fl(n,r.targetId),[4,rf(n.Gc,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function il(t,e){return Vt(this,void 0,void 0,(function(){var n,r;return Mt(this,(function(i){switch(i.label){case 0:n=bo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,tf(n.Gc,e)];case 2:return r=i.sent(),e.zt.forEach((function(t,e){var r=n.Ou.get(e);r&&(mo(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.pu=!0:t.ne.size>0?mo(r.pu):t.se.size>0&&(mo(r.pu),r.pu=!1))})),[4,yl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,cf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ol(t,e,n){var r=bo(t);if(r.Uu&&0===n||!r.Uu&&1===n){var i=[];r.Nu.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=bo(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&mc(n)}(r.vu,e),i.length&&r.Cu.yc(i),r.onlineState=e,r.Uu&&r.Su.ji(e)}}function sl(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Mt(this,(function(c){switch(c.label){case 0:return(r=bo(t)).Su.Ki(e,"rejected",n),i=r.Ou.get(e),(o=i&&i.key)?(s=(s=new rs(Bo.D)).ot(o,new pa(o,Mo.min())),u=vs().add(o),a=new Es(Mo.min(),new Map,new ss(Io),s,u),[4,il(r,a)]):[3,2];case 1:return c.sent(),r.ku=r.ku.remove(o),r.Ou.delete(e),vl(r),[3,4];case 2:return[4,rf(r.Gc,e,!1).then((function(){return fl(r,e,n)})).catch(cf)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function ul(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i;return Mt(this,(function(o){switch(o.label){case 0:n=bo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,$h(n.Gc,e)];case 2:return i=o.sent(),hl(n,r,null),cl(n,r),n.Su.Oi(r,"acknowledged"),[4,yl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,cf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function al(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i;return Mt(this,(function(o){switch(o.label){case 0:r=bo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=bo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.$o(t,e).next((function(e){return mo(null!==e),r=e.keys(),n.Sr.Qo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}(r.Gc,e)];case 2:return i=o.sent(),hl(r,e,n),cl(r,e),r.Su.Oi(e,"rejected",n),[4,yl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,cf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function cl(t,e){(t.Lu.get(e)||[]).forEach((function(t){t.resolve()})),t.Lu.delete(e)}function hl(t,e,n){var r=bo(t),i=r.$u[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$u[r.currentUser.ti()]=i}}function fl(t,e,n){void 0===n&&(n=null),t.Su.Bi(e);for(var r=0,i=t.xu.get(e);r<i.length;r++){var o=i[r];t.Nu.delete(o),n&&t.Cu.Qu(o,n)}t.xu.delete(e),t.Uu&&t.Mu.Kh(e).forEach((function(e){t.Mu.Ho(e)||ll(t,e)}))}function ll(t,e){var n=t.ku.get(e);null!==n&&(Sf(t.bu,n),t.ku=t.ku.remove(e),t.Ou.delete(n),vl(t))}function pl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yf?(t.Mu.Da(o.key,e),dl(t,o)):o instanceof Qf?(lo("SyncEngine","Document no longer in limbo: "+o.key),t.Mu.Na(o.key,e),t.Mu.Ho(o.key)||ll(t,o.key)):go()}}function dl(t,e){var n=e.key;t.ku.get(n)||(lo("SyncEngine","New document in limbo: "+n),t.Fu.push(n),vl(t))}function vl(t){for(;t.Fu.length>0&&t.ku.size<t.Du;){var e=t.Fu.shift(),n=t.Bu.next();t.Ou.set(n,new Zf(e)),t.ku=t.ku.ot(e,n),Nf(t.bu,new Zo(Ta(ga(e.path)),n,2,Ec.ai))}}function yl(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o,s;return Mt(this,(function(u){switch(u.label){case 0:return r=bo(t),i=[],o=[],s=[],r.Nu.P()?[3,3]:(r.Nu.forEach((function(t,u){s.push(r.Ku(u,e,n).then((function(t){if(t){r.Uu&&r.Su.Ki(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Uc.zr(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.Cu.yc(i),[4,function(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return Mt(this,(function(f){switch(f.label){case 0:n=bo(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Ja.forEach(e,(function(e){return Ja.forEach(e.jr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return Ja.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!ec(r=f.sent()))throw r;return lo("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.bh.get(u),c=a.nt,h=a.rt(c),n.bh=n.bh.ot(u,h));return[2]}}))}))}(r.Gc,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function gl(t,e){return Vt(this,void 0,void 0,(function(){var n,r;return Mt(this,(function(i){switch(i.label){case 0:return(n=bo(t)).currentUser.isEqual(e)?[3,3]:(lo("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o;return Mt(this,(function(s){switch(s.label){case 0:return n=bo(t),r=n.Sr,i=n.Nh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Sr.Uo(t).next((function(s){return o=s,r=n.persistence.Th(e),i=new Mc(n.Ch,r,n.persistence.Ah()),r.Uo(t)})).next((function(e){for(var n=[],r=[],s=vs(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Or(t,s).next((function(t){return{Wu:t,ju:n,Gu:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Sr=r,n.Nh=i,n.ph.xh(n.Nh),o)]}}))}))}(n.Gc,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Lu.forEach((function(t){t.forEach((function(t){t.reject(new co(ao.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lu.clear()}(n),n.Su.Wi(e,r.ju,r.Gu),[4,yl(n,r.Wu)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ml(t,e){var n=bo(t),r=n.Ou.get(e);if(r&&r.pu)return vs().add(r.key);var i=vs(),o=n.xu.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Nu.get(a);i=i.Ot(c.view.wu)}return i}function bl(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i;return Mt(this,(function(o){switch(o.label){case 0:return[4,of((n=bo(t)).Gc,e.query,!0)];case 1:return r=o.sent(),i=e.view.Vu(r),[2,(n.Uu&&pl(n,e.targetId,i.Pu),i)]}}))}))}function wl(t,e,n,r){return Vt(this,void 0,void 0,(function(){var i,o;return Mt(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=bo(t),r=bo(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Nh.Or(t,e):Ja.resolve(null)}))}))}((i=bo(t)).Gc,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,jf(i.bu)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hl(i,e,r||null),cl(i,e),function(t,e){bo(bo(t).Sr).jo(e)}(i.Gc,e)):go(),s.label=4;case 4:return[4,yl(i,o)];case 5:return s.sent(),[3,7];case 6:lo("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function El(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return Mt(this,(function(h){switch(h.label){case 0:return Sl(n=bo(t)),Dl(n),!0!==e||!0===n.qu?[3,3]:(r=n.Su.Ci(),[4,Il(n,r.L())]);case 1:return i=h.sent(),n.qu=!0,[4,Hf(n.bu,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],Nf(n.bu,u);return[3,7];case 3:return!1!==e||!1===n.qu?[3,7]:(a=[],c=Promise.resolve(),n.xu.forEach((function(t,e){n.Su.qi(e)?a.push(e):c=c.then((function(){return fl(n,e),rf(n.Gc,e,!0)})),Sf(n.bu,e)})),[4,c]);case 4:return h.sent(),[4,Il(n,a)];case 5:return h.sent(),function(t){var e=bo(t);e.Ou.forEach((function(t,n){Sf(e.bu,n)})),e.Mu.Qh(),e.Ou=new Map,e.ku=new rs(Bo.D)}(n),n.qu=!1,[4,Hf(n.bu,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Il(t,e,n){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return Mt(this,(function(y){switch(y.label){case 0:n=bo(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.xu.get(u))&&0!==c.length?[4,nf(n.Gc,Ta(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Nu.get(l),[4,bl(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,sf(n.Gc,u)];case 8:return v=y.sent(),[4,nf(n.Gc,v)];case 9:return a=y.sent(),[4,nl(n,_l(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Cu.yc(i),r)]}}))}))}function _l(t){return ya(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Tl(t){var e=bo(t);return bo(bo(e.Gc).persistence).pi()}function Al(t,e,n,r){return Vt(this,void 0,void 0,(function(){var i,o,s;return Mt(this,(function(u){switch(u.label){case 0:return(i=bo(t)).qu?(lo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.xu.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uf(i.Gc)];case 3:return o=u.sent(),s=Es.Xt(e,"current"===n),[4,yl(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,rf(i.Gc,e,!0)];case 6:return u.sent(),fl(i,e,r),[3,8];case 7:go(),u.label=8;case 8:return[2]}}))}))}function Nl(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return Mt(this,(function(p){switch(p.label){case 0:if(!(r=Sl(t)).qu)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.xu.has(s)?(lo("SyncEngine","Adding an already active target "+s),[3,5]):[4,sf(r.Gc,s)]):[3,6];case 2:return u=p.sent(),[4,nf(r.Gc,u)];case 3:return a=p.sent(),[4,nl(r,_l(u),a.targetId,!1)];case 4:p.sent(),Nf(r.bu,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Mt(this,(function(e){switch(e.label){case 0:return r.xu.has(t)?[4,rf(r.Gc,t,!1).then((function(){Sf(r.bu,t),fl(r,t)})).catch(cf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Sl(t){var e=bo(t);return e.bu.Hc.ru=il.bind(null,e),e.bu.Hc.qe=ml.bind(null,e),e.bu.Hc.iu=sl.bind(null,e),e.Cu.yc=yc.bind(null,e.vu),e.Cu.Qu=gc.bind(null,e.vu),e}function Dl(t){var e=bo(t);return e.bu.Hc.ou=ul.bind(null,e),e.bu.Hc.au=al.bind(null,e),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xl=function(){function t(){}return t.prototype.xh=function(t){this.zu=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(Mo.min())?this.Hu(t,e):this.zu.Or(t,r).next((function(o){var s=i.Ju(e,o);return(ma(e)||ba(e))&&i.mu(e.an,s,r,n)?i.Hu(t,e):(fo()<=K.DEBUG&&lo("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Oa(e)),i.zu.Lr(t,e,n).next((function(t){return s.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Ju=function(t,e){var n=new ss(Pa(t));return e.forEach((function(e,r){r instanceof la&&ka(t,r)&&(n=n.add(r))})),n},t.prototype.mu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.Hu=function(t,e){return fo()<=K.DEBUG&&lo("IndexFreeQueryEngine","Using full collection scan to execute query:",Oa(e)),this.zu.Lr(t,e,Mo.min())},t}(),Ol=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Yu=1,this.Xu=new ss(ff.Mh)}return t.prototype.ko=function(t){return Ja.resolve(0===this.Sr.length)},t.prototype.Oo=function(t,e,n,r){var i=this.Yu;this.Yu++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Pc(i,e,n,r);this.Sr.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Xu=this.Xu.add(new ff(a.key,i)),this.Dr.Mo(t,a.key.path.F())}return Ja.resolve(o)},t.prototype.$o=function(t,e){return Ja.resolve(this.Zu(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return Ja.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return Ja.resolve(0===this.Sr.length?-1:this.Yu-1)},t.prototype.Uo=function(t){return Ja.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new ff(e,0),i=new ff(e,Number.POSITIVE_INFINITY),o=[];return this.Xu.xt([r,i],(function(t){var e=n.Zu(t.jh);o.push(e)})),Ja.resolve(o)},t.prototype.$r=function(t,e){var n=this,r=new ss(Io);return e.forEach((function(t){var e=new ff(t,0),i=new ff(t,Number.POSITIVE_INFINITY);n.Xu.xt([e,i],(function(t){r=r.add(t.jh)}))})),Ja.resolve(this.el(r))},t.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;Bo.X(i)||(i=i.child(""));var o=new ff(new Bo(i),0),s=new ss(Io);return this.Xu.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(s=s.add(t.jh)),!0)}),o),Ja.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zu(t);null!==r&&n.push(r)})),n},t.prototype.Qo=function(t,e){var n=this;mo(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xu;return Ja.forEach(e.mutations,(function(i){var o=new ff(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xu=r}))},t.prototype.jo=function(t){},t.prototype.Ho=function(t,e){var n=new ff(e,0),r=this.Xu.kt(n);return Ja.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,Ja.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zu=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),kl=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new rs(Bo.D),this.size=0}return t.prototype.Ir=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.F())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return Ja.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=hs();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),Ja.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=ls(),i=new Bo(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),u=s.key,a=s.value,c=a.ta,h=a.readTime;if(!e.path.M(u.path))break;h.h(n)<=0||c instanceof la&&ka(e,c)&&(r=r.ot(c.key,c))}return Ja.resolve(r)},t.prototype.il=function(t,e){return Ja.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Pl(this)},t.prototype.aa=function(t){return Ja.resolve(this.size)},t}(),Pl=function(t){function e(e){var n=this;return(n=t.call(this)||this).ha=e,n}return Ct(e,t),e.prototype.Vr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ha.Ir(t,i,e.readTime)):e.ha.Ar(r)})),Ja.kn(n)},e.prototype.Pr=function(t,e){return this.ha.Rr(t,e)},e.prototype.gr=function(t,e){return this.ha.getEntries(t,e)},e}(Rc),Ll=function(){function t(t){this.persistence=t,this.rl=new Co((function(t){return Xo(t)}),Yo),this.lastRemoteSnapshotVersion=Mo.min(),this.highestTargetId=0,this.ol=0,this.al=new hf,this.targetCount=0,this.hl=Uh.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),Ja.resolve()},t.prototype.Ia=function(t){return Ja.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ma=function(t){return Ja.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.hl.next(),Ja.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),Ja.resolve()},t.prototype.Pa=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hl=new Uh(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.Pa(e),this.targetCount+=1,Ja.resolve()},t.prototype.Va=function(t,e){return this.Pa(e),Ja.resolve()},t.prototype.ya=function(t,e){return this.rl.delete(e.target),this.al.Kh(e.targetId),this.targetCount-=1,Ja.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.rl.delete(s),o.push(r.pa(t,u.targetId)),i++)})),Ja.kn(o).next((function(){return i}))},t.prototype.ba=function(t){return Ja.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return Ja.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Bh(e,n),Ja.resolve()},t.prototype.Ca=function(t,e,n){this.al.Uh(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),Ja.kn(i)},t.prototype.pa=function(t,e){return this.al.Kh(e),Ja.resolve()},t.prototype.xa=function(t,e){var n=this.al.Wh(e);return Ja.resolve(n)},t.prototype.Ho=function(t,e){return Ja.resolve(this.al.Ho(e))},t}(),Rl=function(){function t(t){var e=this;this.cl={},this.Ma=new Ec(0),this.$a=!1,this.$a=!0,this.No=t(this),this.ja=new Ll(this),this.Dr=new gh,this.vr=function(t,n){return new kl(t,(function(t){return e.No.ul(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.$a=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.th=function(){},t.prototype.Ah=function(){return this.Dr},t.prototype.Th=function(t){var e=this.cl[t.ti()];return e||(e=new Ol(this.Dr,this.No),this.cl[t.ti()]=e),e},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;lo("MemoryPersistence","Starting transaction:",t);var i=new Cl(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).xn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return Ja.On(Object.values(this.cl).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),Cl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return Ct(e,t),e}(Vc),Vl=function(){function t(t){this.persistence=t,this.dl=new hf,this.wl=null}return t.El=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw go()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),Ja.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),Ja.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),Ja.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Kh(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Ih();return r.xa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.ya(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.mh().ra();return Ja.forEach(this.Tl,(function(r){var i=Bo.H(r);return e.Il(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yh=function(t,e){var n=this;return this.Il(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.ul=function(t){return 0},t.prototype.Il=function(t,e){var n=this;return Ja.On([function(){return Ja.resolve(n.dl.Ho(e))},function(){return n.persistence.Ih().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),Ml=function(){function t(t){this.ml=t.ml,this.Al=t.Al}return t.prototype.gc=function(t){this.Rl=t},t.prototype.Ic=function(t){this.Pl=t},t.prototype.onMessage=function(t){this.gl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.ml(t)},t.prototype.Vl=function(){this.Rl()},t.prototype.yl=function(t){this.Pl(t)},t.prototype.pl=function(t){this.gl(t)},t}(),Ul={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return Ct(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,o){var s=new uo;s.listenOnce(oo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case io.NO_ERROR:var e=s.getResponseJson();lo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case io.TIMEOUT:lo("Connection",'RPC "'+t+'" timed out'),o(new co(ao.DEADLINE_EXCEEDED,"Request time out"));break;case io.HTTP_ERROR:var n=s.getStatus();if(lo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(ao).indexOf(e)>=0?e:ao.UNKNOWN}(r.status);o(new co(u,r.message))}else o(new co(ao.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new co(ao.UNAVAILABLE,"Connection failed."));break;default:go()}}finally{lo("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Vc=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=ro(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.Cl(i.initMessageHeaders,e),p()||g()||m()||b()||w()||y()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");lo("Connection","Creating WebChannel: "+o,i);var s=r.createWebChannel(o,i),u=!1,a=!1,c=new Ml({ml:function(t){a?lo("Connection","Not sending because WebChannel is closed:",t):(u||(lo("Connection","Opening WebChannel transport."),s.open(),u=!0),lo("Connection","WebChannel sending:",t),s.send(t))},Al:function(){return s.close()}}),h=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(so.EventType.OPEN,(function(){a||lo("Connection","WebChannel transport opened.")})),h(so.EventType.CLOSE,(function(){a||(a=!0,lo("Connection","WebChannel transport closed"),c.yl())})),h(so.EventType.ERROR,(function(t){a||(a=!0,vo("Connection","WebChannel transport errored:",t),c.yl(new co(ao.UNAVAILABLE,"The operation could not be completed")))})),h(so.EventType.MESSAGE,(function(t){var e;if(!a){var n=t.data[0];mo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){lo("Connection","WebChannel received error:",i);var o=i.status,u=function(t){var e=Jo[t];if(void 0!==e)return ns(e)}(o),h=i.message;void 0===u&&(u=ao.INTERNAL,h="Unknown error status: "+o+" with message "+i.message),a=!0,c.yl(new co(u,h)),s.close()}else lo("Connection","WebChannel received:",n),c.pl(n)}})),setTimeout((function(){c.Vl()}),0),c},e}(function(){function t(t){this.bl=t,this._=t._;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Mc=function(t,e,n,r){var i=this.Dl(t,e);lo("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return lo("RestConnection","Received: ",t),t}),(function(e){throw vo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$c=function(t,e,n,r){return this.Mc(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.0",t["Content-Type"]="text/plain",e)for(var n in e.Gh)e.Gh.hasOwnProperty(n)&&(t[n]=e.Gh[n])},t.prototype.Dl=function(t,e){var n=Ul[t];return this.vl+"/v1/"+e+":"+n},t}()),Fl=function(){function t(){var t=this;this.xl=function(){return t.Fl()},this.kl=function(){return t.Ol()},this.Ml=[],this.$l()}return t.prototype.eu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.xl),window.removeEventListener("offline",this.kl)},t.prototype.$l=function(){window.addEventListener("online",this.xl),window.addEventListener("offline",this.kl)},t.prototype.Fl=function(){lo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.Ol=function(){lo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ql=function(){function t(){}return t.prototype.eu=function(t){},t.prototype.Di=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){return new $s(t,!0)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return this.Su=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.Gc=this.Kl(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Kl=function(t){return e=this.persistence,n=new xl,r=t.Ql,new Jh(e,n,r);var e,n,r},t.prototype.Bl=function(t){return new Rl(Vl.El)},t.prototype.Ll=function(t){return new kc},t.prototype.terminate=function(){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Su.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t}(),zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Ct(e,t),e.prototype.initialize=function(e){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,af(this.Gc)];case 2:return n.sent(),[4,this.Wl.initialize(this,e)];case 3:return n.sent(),[4,Dl(this.Wl.fi)];case 4:return n.sent(),[4,jf(this.Wl.bu)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){var e=this.persistence.No.wo;return new Gc(e,t.hs)},e.prototype.Bl=function(t){var e=Qh(t.bl._,t.bl.persistenceKey),n=void 0!==this.cacheSizeBytes?Bc.ao(this.cacheSizeBytes):Bc.fo,r=Bl(t.bl._);return new Kh(this.synchronizeTabs,e,t.clientId,n,t.hs,uc(),ac(),r,this.Su,!!this.forceOwnership)},e.prototype.Ll=function(t){return new kc},e}(Gl),Kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Wl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Ct(e,t),e.prototype.initialize=function(e){return Vt(this,void 0,void 0,(function(){var n,r=this;return Mt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Wl.fi,this.Su instanceof Oc?(this.Su.fi={er:wl.bind(null,n),nr:Al.bind(null,n),sr:Nl.bind(null,n),pi:Tl.bind(null,n)},[4,this.Su.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Xa((function(t){return Vt(r,void 0,void 0,(function(){return Mt(this,(function(e){switch(e.label){case 0:return[4,El(this.Wl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ii?this.ql.start(this.Gc):t||this.ql.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Ll=function(t){var e=uc();if(!Oc.Ln(e))throw new co(ao.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qh(t.bl._,t.bl.persistenceKey);return new Oc(e,t.hs,n,t.clientId,t.Ql)},e}(zl),Hl=function(){function t(){}return t.prototype.initialize=function(t,e){return Vt(this,void 0,void 0,(function(){var n=this;return Mt(this,(function(r){switch(r.label){case 0:return this.Gc?[3,2]:(this.Gc=t.Gc,this.Su=t.Su,this.zc=this.jl(e),this.bu=this.Gl(e),this.vu=this.zl(e),this.fi=this.Hl(e,!t.synchronizeTabs),this.Su.di=function(t){return ol(n.fi,t,1)},this.bu.Hc.Jl=gl.bind(null,this.fi),[4,Hf(this.bu,this.fi.Uu)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.zl=function(t){return new pc},t.prototype.jl=function(t){var e,n=Bl(t.bl._),r=(e=t.bl,new jl(e));return function(t,e,n){return new wf(t,e,n)}(t.credentials,r,n)},t.prototype.Gl=function(t){var e,n,r,i,o,s=this;return e=this.Gc,n=this.zc,r=t.hs,i=function(t){return ol(s.fi,t,0)},o=Fl.Ln()?new Fl:new ql,new If(e,n,r,i,o)},t.prototype.Hl=function(t,e){return function(t,e,n,r,i,o,s){var u=new tl(t,e,n,r,i,o);return s&&(u.qu=!0),u}(this.Gc,this.bu,this.vu,this.Su,t.Ql,t.Du,e)},t.prototype.terminate=function(){return Af(this.bu)},t}(),Wl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xl=function(){this.muted=!0},t.prototype.Yl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t,e,n){if(!n)throw new co(ao.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Yl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new co(ao.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ql(t,e,n,r){if(!0===e&&!0===r)throw new co(ao.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Jl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":go()}function $l(t,e){if(e<=0)throw new co(ao.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zl=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new co(ao.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Zl=new qo(t)},tp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return Ct(e,t),e.documentId=function(){return new e(qo.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Zl.isEqual(t.Zl)},e}(Zl),ep=new RegExp("[~\\*/\\[\\]]"),np=function(t){this.t_=t},rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.e_=function(t){if(2!==t.n_)throw 1===t.n_?t.s_(this.t_+"() can only appear at the top level of your update data"):t.s_(this.t_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(np);function ip(t,e,n){return new yp({n_:3,i_:e.settings.i_,methodName:t.t_,r_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.e_=function(t){return new zu(t.path,new Cu)},e.prototype.isEqual=function(t){return t instanceof e},e}(np),sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return Ct(e,t),e.prototype.e_=function(t){var e=ip(this,t,!0),n=this.o_.map((function(t){return Ip(t,e)})),r=new Vu(n);return new zu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(np),up=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return Ct(e,t),e.prototype.e_=function(t){var e=ip(this,t,!0),n=this.o_.map((function(t){return Ip(t,e)})),r=new Uu(n);return new zu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(np),ap=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return Ct(e,t),e.prototype.e_=function(t){var e=new Fu(t.serializer,eu(t.serializer,this.a_));return new zu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(np),cp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new co(ao.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new co(ao.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.h_=t,this.c_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.c_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.h_===t.h_&&this.c_===t.c_},t.prototype.toJSON=function(){return{latitude:this.h_,longitude:this.c_}},t.prototype.g=function(t){return Io(this.h_,t.h_)||Io(this.c_,t.c_)},t}(),hp=function(t){this.u_=t},fp=/^__.*__$/,lp=function(t,e,n){this.l_=t,this.__=e,this.f_=n},pp=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[];return null!==this.Qe?n.push(new ea(t,this.data,this.Qe,e)):n.push(new ta(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ra(t,this.fieldTransforms)),n},t}(),dp=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[new ea(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new ra(t,this.fieldTransforms)),n},t}();function vp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw go()}}var yp=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.w_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"n_",{get:function(){return this.settings.n_},enumerable:!1,configurable:!0}),t.prototype.E_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.T_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.I_(t),r},t.prototype.m_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.w_(),r},t.prototype.A_=function(t){return this.E_({path:void 0,r_:!0})},t.prototype.s_=function(t){return Dp(t,this.settings.methodName,this.settings.R_||!1,this.path,this.settings.i_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.w_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.s_("Document fields must not be empty");if(vp(this.n_)&&fp.test(t))throw this.s_('Document fields cannot begin and end with "__"')},t}(),gp=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Bl(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new yp({n_:t,methodName:e,i_:n,path:qo.U(),r_:!1,R_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function mp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Ap("Data must be an object, but it was:",s,r);var u,a,c=_p(r,s);if(o.merge)u=new Gu(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=l[f],d=void 0;if(p instanceof Zl)d=p.Zl;else{if("string"!=typeof p)throw go();d=Sp(e,p,n)}if(!s.contains(d))throw new co(ao.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");xp(h,d)||h.push(d)}u=new Gu(h),a=s.fieldTransforms.filter((function(t){return u.Je(t.field)}))}else u=null,a=s.fieldTransforms;return new pp(new aa(c),u,a)}function bp(t,e,n,r){var i=t.P_(1,e,n);Ap("Data must be an object, but it was:",i,r);var o=[],s=new ca;Lo(r,(function(t,r){var u=Sp(e,t,n),a=i.m_(u);if(r instanceof rp||r instanceof hp&&r.u_ instanceof rp)o.push(u);else{var c=Ip(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Gu(o);return new dp(s.Xe(),u,i.fieldTransforms)}function wp(t,e,n,r,i,o){var s=t.P_(1,e,n),u=[Np(e,r,n)],a=[i];if(o.length%2!=0)throw new co(ao.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Np(e,o[c])),a.push(o[c+1]);for(var h=[],f=new ca,l=u.length-1;l>=0;--l)if(!xp(h,u[l])){var p=u[l],d=a[l],v=s.m_(p);if(d instanceof rp||d instanceof hp&&d.u_ instanceof rp)h.push(p);else{var y=Ip(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Gu(h);return new dp(f.Xe(),g,s.fieldTransforms)}function Ep(t,e,n,r){return void 0===r&&(r=!1),Ip(n,t.P_(r?4:3,e))}function Ip(t,e){if(t instanceof hp&&(t=t.u_),Tp(t))return Ap("Unsupported field value:",e,t),_p(t,e);if(t instanceof np)return function(t,e){if(!vp(e.n_))throw e.s_(t.t_+"() can only be used with update() and set()");if(!e.path)throw e.s_(t.t_+"() is not currently supported inside arrays");var n=t.e_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.r_&&4!==e.n_)throw e.s_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ip(o[i],e.A_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vo.fromDate(t);return{timestampValue:nu(e.serializer,n)}}if(t instanceof Vo){var r=new Vo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nu(e.serializer,r)}}if(t instanceof cp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof No)return{bytesValue:ru(e.serializer,t.l)};if(t instanceof lp){var i=e._,o=t.l_;if(!o.isEqual(i))throw e.s_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:su(t.l_||e._,t.__.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.s_("Unsupported field value: "+Jl(t))}(t,e)}function _p(t,e){var n={};return Ro(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Lo(t,(function(t,r){var i=Ip(r,e.T_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Tp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vo||t instanceof cp||t instanceof No||t instanceof lp||t instanceof np)}function Ap(t,e,n){if(!Tp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jl(n);throw"an object"===r?e.s_(t+" a custom object"):e.s_(t+" "+r)}}function Np(t,e,n){if(e instanceof Zl)return e.Zl;if("string"==typeof e)return Sp(t,e);throw Dp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Sp(t,e,n){try{return function(t){if(t.search(ep)>=0)throw new co(ao.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(tp.bind.apply(tp,Ut([void 0],t.split("."))))}catch(e){throw new co(ao.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Zl}catch(e){throw Dp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Dp(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new co(ao.INVALID_ARGUMENT,(u+=". ")+t+a)}function xp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Op=function(){function t(t){this.zc=t,this.g_=new Map,this.mutations=[],this.V_=!1,this.y_=null,this.p_=new Set}return t.prototype.b_=function(t){return Vt(this,void 0,void 0,(function(){var e,n=this;return Mt(this,(function(r){switch(r.label){case 0:if(this.v_(),this.mutations.length>0)throw new co(ao.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Mt(this,(function(a){switch(a.label){case 0:return n=bo(t),r=lu(n.serializer)+"/documents",i={documents:e.map((function(t){return au(n.serializer,t)}))},[4,n.$c("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){mo(!!e.found),e.found.name,e.found.updateTime;var n=cu(t,e.found.name),r=ou(e.found.updateTime),i=new aa({mapValue:{fields:e.found.fields}});return new la(n,r,i,{})}(t,e):"missing"in e?function(t,e){mo(!!e.missing),mo(!!e.readTime);var n=cu(t,e.missing),r=ou(e.readTime);return new pa(n,r)}(t,e):go()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());mo(!!e),u.push(e)})),u)]}}))}))}(this.zc,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof pa||t instanceof la?n.S_(t):go()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.d_(t,this.Ge(t))),this.p_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.d_(t,this.D_(t)))}catch(t){this.y_=t}this.p_.add(t.toString())},t.prototype.delete=function(t){this.write([new sa(t,this.Ge(t))]),this.p_.add(t.toString())},t.prototype.commit=function(){return Vt(this,void 0,void 0,(function(){var t,e=this;return Mt(this,(function(n){switch(n.label){case 0:if(this.v_(),this.y_)throw this.y_;return t=this.g_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Bo.H(n);e.mutations.push(new ua(r,e.Ge(r)))})),[4,function(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i;return Mt(this,(function(o){switch(o.label){case 0:return n=bo(t),r=lu(n.serializer)+"/documents",i={writes:e.map((function(t){return vu(n.serializer,t)}))},[4,n.Mc("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.zc,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.S_=function(t){var e;if(t instanceof la)e=t.version;else{if(!(t instanceof pa))throw go();e=Mo.min()}var n=this.g_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new co(ao.ABORTED,"Document version changed between two reads.")}else this.g_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.g_.get(t.toString());return!this.p_.has(t.toString())&&e?Hu.updateTime(e):Hu.ze()},t.prototype.D_=function(t){var e=this.g_.get(t.toString());if(!this.p_.has(t.toString())&&e){if(e.isEqual(Mo.min()))throw new co(ao.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hu.updateTime(e)}return Hu.exists(!0)},t.prototype.write=function(t){this.v_(),this.mutations=this.mutations.concat(t)},t.prototype.v_=function(){},t}(),kp=function(){function t(t,e,n,r){this.hs=t,this.zc=e,this.updateFunction=n,this.ls=r,this.C_=5,this.Vs=new Qa(this.hs,"transaction_retry")}return t.prototype.run=function(){this.N_()},t.prototype.N_=function(){var t=this;this.Vs.Pn((function(){return Vt(t,void 0,void 0,(function(){var t,e,n=this;return Mt(this,(function(r){return t=new Op(this.zc),(e=this.x_(t))&&e.then((function(e){n.hs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.F_(t)}))}))})).catch((function(t){n.F_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!Go(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.F_=function(t){var e=this;this.C_>0&&this.k_(t)?(this.C_-=1,this.hs.ws((function(){return e.N_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.k_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!es(e)}return!1},t}(),Pp=function(){function t(t,e){this.credentials=t,this.hs=e,this.clientId=Eo.t(),this.O_=new Ya}return t.prototype.start=function(t,e,n){var r=this;this.M_(),this.bl=t;var i=new Ya,o=!1;return this.credentials.Jh((function(t){if(!o)return o=!0,lo("FirestoreClient","Initializing. user=",t.uid),r.L_(e,n,t,i).then(r.O_.resolve,r.O_.reject);r.hs.Cs((function(){return function(t,e){return Vt(this,void 0,void 0,(function(){var n,r;return Mt(this,(function(i){switch(i.label){case 0:return(n=bo(t)).hs.Fs(),lo("RemoteStore","RemoteStore received new credentials"),r=Pf(n),n.Xc.add(3),[4,Tf(n)];case 1:return i.sent(),r&&n.nu.set("Unknown"),[4,n.Hc.Jl(e)];case 2:return i.sent(),n.Xc.delete(3),[4,_f(n)];case 3:return i.sent(),[2]}}))}))}(r.bu,t)}))})),this.hs.ws((function(){return r.O_.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!0),function(t){var e=bo(t);return e.Xc.delete(0),_f(e)}(t.bu)}))},t.prototype.L_=function(t,e,n,r){return Vt(this,void 0,void 0,(function(){var i,o,s=this;return Mt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),i={hs:this.hs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Ql:n,Du:100},[4,t.initialize(i)];case 1:return u.sent(),[4,e.initialize(t,i)];case 2:return u.sent(),this.persistence=t.persistence,this.Su=t.Su,this.Gc=t.Gc,this.ql=t.ql,this.zc=e.zc,this.bu=e.bu,this.fi=e.fi,this.B_=e.vu,this.B_.Us=el.bind(null,this.fi),this.B_.Ws=rl.bind(null,this.fi),this.persistence.Za((function(){return Vt(s,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(o=u.sent(),r.reject(o),!function(t){return"FirebaseError"===t.name?t.code===ao.FAILED_PRECONDITION||t.code===ao.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(o))throw o;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),this.L_(new Gl,new Hl,n,r))];case 4:return[2]}}))}))},t.prototype.M_=function(){if(this.hs.ps)throw new co(ao.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!1),function(t){return Vt(this,void 0,void 0,(function(){var e;return Mt(this,(function(n){switch(n.label){case 0:return(e=bo(t)).Xc.add(0),[4,Tf(e)];case 1:return n.sent(),e.nu.set("Offline"),[2]}}))}))}(t.bu)}))},t.prototype.terminate=function(){var t=this;this.hs.Ds();var e=new Ya;return this.hs.bs((function(){return Vt(t,void 0,void 0,(function(){var t,n;return Mt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Af(this.bu)];case 1:return r.sent(),[4,this.Su.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=fc(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.M_();var e=new Ya;return this.hs.ws((function(){return function(t,e){return Vt(this,void 0,void 0,(function(){var n,r,i,o,s;return Mt(this,(function(u){switch(u.label){case 0:Pf((n=bo(t)).bu)||lo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=bo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.Gc)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Lu.get(r)||[]).push(e),n.Lu.set(r,i),[3,4]);case 3:return o=u.sent(),s=fc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.M_();var i=new Wl(n),o=new bc(t,i,e);return this.hs.ws((function(){return dc(r.B_,o)})),function(){i.Xl(),r.hs.ws((function(){return vc(r.B_,o)}))}},t.prototype.q_=function(t){return Vt(this,void 0,void 0,(function(){var e,n=this;return Mt(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),e=new Ya,[2,(this.hs.ws((function(){return function(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o;return Mt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=bo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Nh.Cr(t,e)}))}(t,e)];case 1:return(r=s.sent())instanceof la?n.resolve(r):r instanceof pa?n.resolve(null):n.reject(new co(ao.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=fc(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.U_=function(t,e){return void 0===e&&(e={}),Vt(this,void 0,void 0,(function(){var n,r=this;return Mt(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),n=new Ya,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new Wl({next:function(o){e.ws((function(){return vc(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new co(ao.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new co(ao.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new bc(ga(n.path),o,{includeMetadataChanges:!0,Xs:!0});return dc(t,s)}(r.B_,r.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.K_=function(t){return Vt(this,void 0,void 0,(function(){var e,n=this;return Mt(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),e=new Ya,[2,(this.hs.ws((function(){return function(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Mt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,of(t,e,!0)];case 1:return r=c.sent(),i=new Jf(e,r.Fh),o=i.Eu(r.documents),s=i.Vr(o,!1),n.resolve(s.snapshot),[3,3];case 2:return u=c.sent(),a=fc(u,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.Q_=function(t,e){return void 0===e&&(e={}),Vt(this,void 0,void 0,(function(){var n,r=this;return Mt(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),n=new Ya,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new Wl({next:function(n){e.ws((function(){return vc(t,s)})),n.fromCache&&"server"===r.source?i.reject(new co(ao.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new bc(n,o,{includeMetadataChanges:!0,Xs:!0});return dc(t,s)}(r.B_,r.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.M_();var n=new Ya;return this.hs.ws((function(){return function(t,e,n){return Vt(this,void 0,void 0,(function(){var r,i,o,s;return Mt(this,(function(u){switch(u.label){case 0:r=Dl(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=bo(t),i=Vo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),vs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Nh.Or(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Ju(c,n.get(c.key));null!=h&&s.push(new ea(c.key,h,ha(h.proto.mapValue),Hu.exists(!0)))}return r.Sr.Oo(t,i,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(r.Gc,e)];case 2:return i=u.sent(),r.Su.Fi(i.batchId),function(t,e,n){var r=t.$u[t.currentUser.ti()];r||(r=new rs(Io)),r=r.ot(e,n),t.$u[t.currentUser.ti()]=r}(r,i.batchId,n),[4,yl(r,i.wr)];case 3:return u.sent(),[4,jf(r.bu)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=fc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype._=function(){return this.bl._},t.prototype.W_=function(t){var e=this;this.M_();var n=new Wl(t);return this.hs.ws((function(){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(t){return[2,function(t,e){bo(t).qs.add(e),e.next()}(this.B_,n)]}))}))})),function(){n.Xl(),e.hs.ws((function(){return Vt(e,void 0,void 0,(function(){return Mt(this,(function(t){return[2,function(t,e){bo(t).qs.delete(e)}(this.B_,n)]}))}))}))}},Object.defineProperty(t.prototype,"j_",{get:function(){return this.hs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.M_();var n=new Ya;return this.hs.ws((function(){return new kp(e.hs,e.zc,t,n).run(),Promise.resolve()})),n.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Rp=function(){function t(t,e,n,r){this._=t,this.G_=e,this.z_=n,this.H_=r}return t.prototype.J_=function(t){switch(Rs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bs(t.integerValue||t.doubleValue);case 3:return this.Y_(t.timestampValue);case 4:return this.X_(t);case 5:return t.stringValue;case 6:return this.H_(Gs(t.bytesValue));case 7:return this.Z_(t.referenceValue);case 8:return this.tf(t.geoPointValue);case 9:return this.ef(t.arrayValue);case 10:return this.nf(t.mapValue);default:throw go()}},t.prototype.nf=function(t){var e=this,n={};return Lo(t.fields||{},(function(t,r){n[t]=e.J_(r)})),n},t.prototype.tf=function(t){return new cp(Bs(t.latitude),Bs(t.longitude))},t.prototype.ef=function(t){var e=this;return(t.values||[]).map((function(t){return e.J_(t)}))},t.prototype.X_=function(t){switch(this.G_){case"previous":var e=ks(t);return null==e?null:this.J_(e);case"estimate":return this.Y_(Ps(t));default:return null}},t.prototype.Y_=function(t){var e=qs(t);return new Vo(e.seconds,e.nanos)},t.prototype.Z_=function(t){var e=jo.q(t);mo(Ou(e));var n=new ko(e.get(1),e.get(3)),r=new Bo(e.N(5));return n.isEqual(this._)||po("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.z_(r)},t}(),Cp=Bc.uo,Vp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new co(ao.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Bc._o;else{if(t.cacheSizeBytes!==Cp&&t.cacheSizeBytes<Bc.lo)throw new co(ao.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Bc.lo);this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ql("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Mp="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Up=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new co(ao.FAILED_PRECONDITION,Mp)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new co(ao.FAILED_PRECONDITION,Mp)},t.prototype.clearIndexedDbPersistence=function(t){throw new co(ao.FAILED_PRECONDITION,Mp)},t}(),jp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){var n=new Hl,r=new zl(n,t.sf().cacheSizeBytes,e);return t.if(r,n)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){var e=new Hl,n=new Kl(e,t.sf().cacheSizeBytes);return t.if(n,e)},t.prototype.clearIndexedDbPersistence=function(t){var e=this,n=new Ya;return t.rf.bs((function(){return Vt(e,void 0,void 0,(function(){var e;return Mt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Vt(this,void 0,void 0,(function(){var e;return Mt(this,(function(n){switch(n.label){case 0:return $a.Ln()?(e=t+"main",[4,$a.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Qh(t.l_,t.af))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},t}(),Fp=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Up),this.hf=r,this.cf=null,this.rf=new hc,this.INTERNAL={delete:function(){return Vt(i,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return this.uf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.cf=o,this.l_=t._f(o),this.af=o.name,this.ff=new df(n)}else{var s=e;if(!s.projectId)throw new co(ao.INVALID_ARGUMENT,"Must provide projectId");this.l_=new ko(s.projectId,s.database),this.af="[DEFAULT]",this.ff=new pf}this.df=new Vp({})}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.Ef||(this.Ef=new gp(this.l_,this.df.ignoreUndefinedProperties)),this.Ef},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.df),t)).merge;var e=new Vp(t);if(this.lf&&!this.df.isEqual(e))throw new co(ao.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.df=e,void 0!==e.credentials&&(this.ff=function(t){if(!t)return new pf;switch(t.type){case"gapi":var e=t.client;return mo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new yf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new co(ao.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.df.host&&vo("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return this.uf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.uf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.lf)throw new co(ao.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&Ql("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.hf.enableMultiTabIndexedDbPersistence(this):this.hf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return Vt(this,void 0,void 0,(function(){return Mt(this,(function(t){if(void 0!==this.lf&&!this.lf.j_)throw new co(ao.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return[2,this.hf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Tf",{get:function(){return this.uf(),this.lf.j_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.uf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.uf(),Lp(t))return this.lf.W_(t);var e={next:t};return this.lf.W_(e)},t.prototype.uf=function(){return this.lf||this.if(new Gl,new Hl),this.lf},t.prototype.If=function(){return new Oo(this.l_,this.af,this.df.host,this.df.ssl,this.df.experimentalForceLongPolling,this.df.experimentalAutoDetectLongPolling)},t.prototype.if=function(t,e){var n=this.If();return this.lf=new Pp(this.ff,this.rf),this.lf.start(n,t,e)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new co(ao.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new co(ao.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ko(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new co(ao.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Xl("Firestore.collection","path",t),this.uf(),new Zp(jo.q(t),this,null)},t.prototype.doc=function(t){return Xl("Firestore.doc","path",t),this.uf(),Gp.mf(jo.q(t),this,null)},t.prototype.collectionGroup=function(t){if(Xl("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new co(ao.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.uf(),new Jp(function(t){return new va(jo.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return this.uf().transaction((function(n){return t(new qp(e,n))}))},t.prototype.batch=function(){return this.uf(),new Bp(this)},t.prototype.sf=function(){return this.df},t}(),qp=function(){function t(t,e){this.Af=t,this.Rf=e}return t.prototype.get=function(t){var e=this,n=td("Transaction.get",t,this.Af);return this.Rf.b_([n.__]).then((function(t){if(!t||1!==t.length)return go();var r=t[0];if(r instanceof pa)return new Kp(e.Af,n.__,null,!1,!1,n.f_);if(r instanceof la)return new Kp(e.Af,n.__,r,!1,!1,n.f_);throw go()}))},t.prototype.set=function(t,e,n){var r=td("Transaction.set",t,this.Af);n=Yl("Transaction.set",n);var i=nd(r.f_,e,n),o=mp(this.Af.wf,"Transaction.set",r.__,i,null!==r.f_,n);return this.Rf.set(r.__,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof tp?(r=td("Transaction.update",t,this.Af),i=wp(this.Af.wf,"Transaction.update",r.__,e,n,o)):(r=td("Transaction.update",t,this.Af),i=bp(this.Af.wf,"Transaction.update",r.__,e)),this.Rf.update(r.__,i),this},t.prototype.delete=function(t){var e=td("Transaction.delete",t,this.Af);return this.Rf.delete(e.__),this},t}(),Bp=function(){function t(t){this.Af=t,this.Pf=[],this.gf=!1}return t.prototype.set=function(t,e,n){this.Vf();var r=td("WriteBatch.set",t,this.Af);n=Yl("WriteBatch.set",n);var i=nd(r.f_,e,n),o=mp(this.Af.wf,"WriteBatch.set",r.__,i,null!==r.f_,n);return this.Pf=this.Pf.concat(o.d_(r.__,Hu.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Vf(),"string"==typeof e||e instanceof tp?(r=td("WriteBatch.update",t,this.Af),i=wp(this.Af.wf,"WriteBatch.update",r.__,e,n,o)):(r=td("WriteBatch.update",t,this.Af),i=bp(this.Af.wf,"WriteBatch.update",r.__,e)),this.Pf=this.Pf.concat(i.d_(r.__,Hu.exists(!0))),this},t.prototype.delete=function(t){this.Vf();var e=td("WriteBatch.delete",t,this.Af);return this.Pf=this.Pf.concat(new sa(e.__,Hu.ze())),this},t.prototype.commit=function(){return this.Vf(),this.gf=!0,this.Pf.length>0?this.Af.uf().write(this.Pf):Promise.resolve()},t.prototype.Vf=function(){if(this.gf)throw new co(ao.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.l_,e,r)||this).__=e,i.firestore=n,i.f_=r,i.lf=i.firestore.uf(),i}return Ct(e,t),e.mf=function(t,n,r){if(t.length%2!=0)throw new co(ao.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Bo(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Zp(this.__.path.F(),this.firestore,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.__.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Xl("DocumentReference.collection","path",t),!t)throw new co(ao.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=jo.q(t);return new Zp(this.__.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.__.isEqual(t.__)&&this.f_===t.f_},e.prototype.set=function(t,e){e=Yl("DocumentReference.set",e);var n=nd(this.f_,t,e),r=mp(this.firestore.wf,"DocumentReference.set",this.__,n,null!==this.f_,e);return this.lf.write(r.d_(this.__,Hu.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof tp?wp(this.firestore.wf,"DocumentReference.update",this.__,t,e,r):bp(this.firestore.wf,"DocumentReference.update",this.__,t),this.lf.write(n.d_(this.__,Hu.exists(!0)))},e.prototype.delete=function(){return this.lf.write([new sa(this.__,Hu.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Lp(i[u])||(s=i[u],u++);var a={includeMetadataChanges:s.includeMetadataChanges};if(Lp(i[u])){var c=i[u];i[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var h={next:function(t){i[u]&&i[u](r.yf(t))},error:i[u+1],complete:i[u+2]};return this.lf.listen(ga(this.__.path),a,h)},e.prototype.get=function(t){var e=this,n=this.firestore.uf();return t&&"cache"===t.source?n.q_(this.__).then((function(t){return new Kp(e.firestore,e.__,t,!0,t instanceof la&&t.Ye,e.f_)})):n.U_(this.__,t).then((function(t){return e.yf(t)}))},e.prototype.withConverter=function(t){return new e(this.__,this.firestore,t)},e.prototype.yf=function(t){var e=t.docs.get(this.__);return new Kp(this.firestore,this.__,e,t.fromCache,t.hasPendingWrites,this.f_)},e}(lp),zp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kp=function(){function t(t,e,n,r,i,o){this.Af=t,this.__=e,this.pf=n,this.bf=r,this.vf=i,this.f_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.pf){if(this.f_){var n=new Hp(this.Af,this.__,this.pf,this.bf,this.vf,null);return this.f_.fromFirestore(n,t)}return new Rp(this.Af.l_,t.serverTimestamps||"none",(function(t){return new Gp(t,e.Af,null)}),(function(t){return new xo(t)})).J_(this.pf.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.pf){var r=this.pf.data().field(Np("DocumentSnapshot.get",t,this.__));if(null!==r)return new Rp(this.Af.l_,e.serverTimestamps||"none",(function(t){return new Gp(t,n.Af,n.f_)}),(function(t){return new xo(t)})).J_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Gp(this.__,this.Af,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.pf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new zp(this.vf,this.bf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&this.bf===e.bf&&this.__.isEqual(e.__)&&(null===this.pf?null===e.pf:this.pf.isEqual(e.pf))&&this.f_===e.f_},t}(),Hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Kp);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e,n){if("string"==typeof n){if(""===n)throw new co(ao.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ia(e)&&-1!==n.indexOf("/"))throw new co(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(jo.q(n));if(!Bo.X(r))throw new co(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return zs(t,new Bo(r))}if(n instanceof lp)return zs(t,n.__);throw new co(ao.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jl(n)+".")}function Xp(t,e){if(!Array.isArray(t)||0===t.length)throw new co(ao.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new co(ao.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Yp(t,e,n){if(!n.isEqual(e))throw new co(ao.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Qp(t){if(ba(t)&&0===t.on.length)throw new co(ao.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jp=function(){function t(t,e,n){this.Sf=t,this.firestore=e,this.f_=n}return t.prototype.where=function(e,n,r){var i=Np("Query.where",e),o=function(t,e,n,r,i,o,s){var u;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new co(ao.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Xp(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Wp(r,t,f))}u={arrayValue:{values:a}}}else u=Wp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Xp(s,o),u=Ep(n,e,s,"in"===o||"not-in"===o);var l=La.create(i,o,u);return function(t,e){if(e.un()){var n=Ea(t);if(null!==n&&!n.isEqual(e.field))throw new co(ao.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=wa(t);null!==r&&Yp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new co(ao.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new co(ao.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.Sf,"Query.where",this.firestore.wf,this.firestore.l_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new va(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new co(ao.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Np("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new co(ao.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new co(ao.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ha(e,n);return function(t,e){if(null===wa(t)){var n=Ea(t);null!==n&&Yp(0,n,e.field)}}(t,r),r}(this.Sf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new va(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.limit=function(e){return $l("Query.limit",e),new t(Aa(this.Sf,e,"F"),this.firestore,this.f_)},t.prototype.limitToLast=function(e){return $l("Query.limitToLast",e),new t(Aa(this.Sf,e,"L"),this.firestore,this.f_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAt",e,n,!0);return new t(Na(this.Sf,i),this.firestore,this.f_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAfter",e,n,!1);return new t(Na(this.Sf,i),this.firestore,this.f_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endBefore",e,n,!0);return new t(Sa(this.Sf,i),this.firestore,this.f_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endAt",e,n,!1);return new t(Sa(this.Sf,i),this.firestore,this.f_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Da(this.Sf,e.Sf)&&this.f_===e.f_},t.prototype.withConverter=function(e){return new t(this.Sf,this.firestore,e)},t.prototype.Df=function(t,e,n,r){if(e instanceof Kp)return function(t,e,n,r,i){if(!r)throw new co(ao.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=_a(t);s<u.length;s++){var a=u[s];if(a.field.W())o.push(zs(e,r.key));else{var c=r.field(a.field);if(Os(c))throw new co(ao.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.B();throw new co(ao.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ba(o,i)}(this.Sf,this.firestore.l_,t,e.pf,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new co(ao.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.W()){if("string"!=typeof c)throw new co(ao.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ia(t)&&-1!==c.indexOf("/"))throw new co(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(jo.q(c));if(!Bo.X(h))throw new co(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Bo(h);u.push(zs(e,f))}else{var l=Ep(n,r,c);u.push(l)}}return new Ba(u,o)}(this.Sf,this.firestore.l_,this.firestore.wf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},u=0;if("object"!=typeof i[u]||Lp(i[u])||(s=i[u],u++),Lp(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}var c={next:function(t){i[u]&&i[u](new $p(r.firestore,r.Sf,t,r.f_))},error:i[u+1],complete:i[u+2]};return Qp(this.Sf),this.firestore.uf().listen(this.Sf,s,c)},t.prototype.get=function(t){var e=this;Qp(this.Sf);var n=this.firestore.uf();return(t&&"cache"===t.source?n.K_(this.Sf):n.Q_(this.Sf,t)).then((function(t){return new $p(e.firestore,e.Sf,t,e.f_)}))},t}(),$p=function(){function t(t,e,n,r){this.Af=t,this.Cf=e,this.Nf=n,this.f_=r,this.xf=null,this.Ff=null,this.metadata=new zp(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Nf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Nf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Nf.docs.forEach((function(r){t.call(e,n.kf(r,n.metadata.fromCache,n.Nf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Jp(this.Cf,this.Af,this.f_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Nf.jt)throw new co(ao.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.xf&&this.Ff===e||(this.xf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:ed(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.Nf,e,this.kf.bind(this)),this.Ff=e),this.xf},t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&Da(this.Cf,e.Cf)&&this.Nf.isEqual(e.Nf)&&this.f_===e.f_},t.prototype.kf=function(t,e,n){return new Hp(this.Af,t.key,t,e,n,this.f_)},t}(),Zp=function(t){function e(e,n,r){var i=this;if((i=t.call(this,ga(e),n,r)||this).Of=e,e.length%2!=1)throw new co(ao.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return Ct(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Sf.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Sf.path.F();return t.P()?null:new Gp(new Bo(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Sf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=Eo.t()),Xl("CollectionReference.doc","path",t);var e=jo.q(t);return Gp.mf(this.Sf.path.child(e),this.firestore,this.f_)},e.prototype.add=function(t){var e=this.f_?this.f_.toFirestore(t):t,n=this.doc();return new Gp(n.__,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Of,this.firestore,t)},e}(Jp);function td(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new co(ao.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jl(t);throw new co(ao.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,Gp);if(r.firestore!==n)throw new co(ao.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ed(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return go()}}function nd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.serverTimestamp=function(){var t=new op("serverTimestamp");return t.t_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new rp("deleteField");return t.t_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sp("arrayUnion",t)}.apply(void 0,t);return r.t_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new up("arrayRemove",t)}.apply(void 0,t);return r.t_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new ap("increment",t)}(t);return n.t_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.u_.isEqual(t.u_)},e}(hp),id={Firestore:Fp,GeoPoint:cp,Timestamp:Vo,Blob:xo,Transaction:qp,WriteBatch:Bp,DocumentReference:Gp,DocumentSnapshot:Kp,Query:Jp,QueryDocumentSnapshot:Hp,QuerySnapshot:$p,CollectionReference:Zp,FieldPath:tp,FieldValue:rd,setLogLevel:function(t){var e;e=t,ho.setLogLevel(e)},CACHE_SIZE_UNLIMITED:Cp};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){!function(t,e){t.INTERNAL.registerComponent(new M("firestore",(function(t){return function(t,e){return new Fp(t,e,new jp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},id)))}(t),t.registerVersion("@firebase/firestore","2.0.0")}od(kt);const sd={apiKey:"AIzaSyC60Me1vBvftXFD35wTCm0qUYbipM-3AvE",authDomain:"tpblog-3fd80.firebaseapp.com",projectId:"tpblog-3fd80",storageBucket:"tpblog-3fd80.appspot.com",messagingSenderId:"167562787238",appId:"1:167562787238:web:ef7dc4a30716f8cc73b767"},ud=(kt.initializeApp(sd),kt.firestore())},1759:function(t,e,n){n.d(e,{A:function(){return d}});var r=n(6768),i=n(4232);const o={class:"post"},s={key:1,class:"details"},u={class:"tags"},a={key:2},c={key:3};function h(t,e,n,h,f,l){const p=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",o,[n.details?((0,r.uX)(),(0,r.CE)("span",s,(0,i.v_)(n.post.title),1)):((0,r.uX)(),(0,r.Wv)(p,{key:0,to:"/Details/"+n.post.id,class:"details"},{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(n.post.title),1)])),_:1},8,["to"])),(0,r.Lk)("div",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.post.tags,((t,e)=>((0,r.uX)(),(0,r.CE)("span",{class:"tag",key:e},(0,i.v_)(t),1)))),128))]),n.details?((0,r.uX)(),(0,r.CE)("p",c,(0,i.v_)(n.post.article),1)):((0,r.uX)(),(0,r.CE)("p",a,(0,i.v_)(l.snippet),1))])}var f={name:"SinglePost",props:{post:Object,details:Boolean},computed:{snippet(){if(this.post.article){let t=this.post.article,e=t.substring(0,50)+"...";return e}return""}}},l=n(1241);const p=(0,l.A)(f,[["render",h],["__scopeId","data-v-6710b74a"]]);var d=p},5886:function(t,e,n){n.r(e),n.d(e,{default:function(){return A}});var r=n(6768),i=n(5130),o=n(4232);const s=t=>((0,r.Qi)("data-v-72dd5000"),t=t(),(0,r.jt)(),t),u={class:"container"},a=s((()=>(0,r.Lk)("h2",null,"Add New Post",-1))),c={class:"form-group"},h=s((()=>(0,r.Lk)("label",{for:"title"},"Title",-1))),f={class:"form-group"},l=s((()=>(0,r.Lk)("label",{for:"content"},"Content",-1))),p={class:"form-group"},d=s((()=>(0,r.Lk)("label",{for:"tags"},"Tags (comma-separated)",-1))),v=s((()=>(0,r.Lk)("button",{type:"submit"},"Add Post",-1))),y={key:0,class:"error"};function g(t,e,n,s,g,m){return(0,r.uX)(),(0,r.CE)("div",u,[(0,r.Lk)("form",{onSubmit:e[3]||(e[3]=(0,i.D$)(((...t)=>m.submitPost&&m.submitPost(...t)),["prevent"])),class:"post-form"},[a,(0,r.Lk)("div",c,[h,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>g.title=t),id:"title",placeholder:"Enter title",required:""},null,512),[[i.Jo,g.title]])]),(0,r.Lk)("div",f,[l,(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>g.content=t),id:"content",placeholder:"Enter content",rows:"6",required:""},null,512),[[i.Jo,g.content]])]),(0,r.Lk)("div",p,[d,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>g.tags=t),id:"tags",placeholder:"Enter tags"},null,512),[[i.Jo,g.tags]])]),v,g.error?((0,r.uX)(),(0,r.CE)("p",y,(0,o.v_)(g.error),1)):(0,r.Q3)("",!0)],32)])}n(4114);var m=n(144),b=n(6902);const w=t=>{const e=(0,m.KR)(null);let n=b.$.collection("Articles").doc();const r=n.id,i=async()=>{try{n.set(t),console.log("Doc written ",r),(void 0).$router.push("/")}catch(i){e.value=i.message}};return{error:e,add:i}};var E=w,I={data(){return{title:"",content:"",tags:"",error:null}},methods:{async submitPost(){if(this.error=null,!this.title.trim()||!this.content.trim())return void(this.error="Please fill out all required fields.");const t=this.tags.split(",").map((t=>t.trim())),e={title:this.title,content:this.content,tags:t},{error:n,add:r}=E(e);await r(),this.$router.push({name:"home"})}}},_=n(1241);const T=(0,_.A)(I,[["render",g],["__scopeId","data-v-72dd5000"]]);var A=T},1471:function(t,e,n){n.r(e),n.d(e,{default:function(){return S}});var r=n(6768);const i={id:"app"};function o(t,e,n,o,s,u){const a=(0,r.g2)("PostList");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(a)])}const s={class:"container"},u={id:"Posts",class:"post-grid"};function a(t,e,n,i,o,a){const c=(0,r.g2)("TagCloud"),h=(0,r.g2)("SinglePost");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(c,{onTagClicked:a.handleTagClick},null,8,["onTagClicked"]),(0,r.Lk)("div",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.filteredPosts,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:"post-card"},[(0,r.bF)(h,{post:t,details:!1},null,8,["post"])])))),128))])])}var c=n(144),h=n(6902);const f=()=>{const t=(0,c.KR)([]),e=(0,c.KR)(null),n=async()=>{try{const e=await h.$.collection("Articles").get();t.value=e.docs.map((t=>({...t.data(),id:t.id})))}catch(n){e.value=n.message}};return{posts:t,error:e,load:n}};var l=f,p=n(1759),d=n(4232);const v={class:"container"},y={class:"unique-tags"};function g(t,e,n,i,o,s){const u=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("div",y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.uniqueTags,((t,e)=>((0,r.uX)(),(0,r.Wv)(u,{to:"/tags/"+t,class:(0,d.C4)(["tag",{selected:t===o.selectedTag}]),key:e,onClick:e=>s.handleTagClick(t)},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(t),1)])),_:2},1032,["to","onClick","class"])))),128))])])}n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var m={name:"TagCloud",data(){return{uniqueTags:[],selectedTag:null}},mounted(){this.fetchPosts()},methods:{async fetchPosts(){const{posts:t,error:e,load:n}=l();if(e.value)return void console.error("Error fetching posts:",e.value);await n();const r=t.value.flatMap((t=>t.tags));this.uniqueTags=[...new Set(r)]},handleTagClick(t){this.selectedTag=t,this.$emit("tagClicked",t)}}},b=n(1241);const w=(0,b.A)(m,[["render",g],["__scopeId","data-v-36703d38"]]);var E=w,I={name:"PostList",components:{SinglePost:p.A,TagCloud:E},data(){return{posts:[],uniqueTags:[],selectedTag:null,filteredPosts:[]}},mounted(){this.fetchPosts()},methods:{async fetchPosts(){const{posts:t,error:e,load:n}=l();e.value?console.error("Error fetching posts:",e.value):(await n(),this.posts=t.value,this.updateFilteredPosts())},handleTagClick(t){console.log(t),this.selectedTag=t,this.updateFilteredPosts()},updateFilteredPosts(){this.selectedTag?this.filteredPosts=this.posts.filter((t=>t.tags.includes(this.selectedTag))):this.filteredPosts=this.posts}}};const _=(0,b.A)(I,[["render",a],["__scopeId","data-v-f9ea4b6e"]]);var T=_,A={components:{PostList:T}};const N=(0,b.A)(A,[["render",o]]);var S=N},4467:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var r=n(6768);const i={class:"post"};function o(t,e,n,o,s,u){const a=(0,r.g2)("SinglePost");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(a,{details:!0,post:s.post},null,8,["post"])])}var s=n(144),u=n(6902);const a=t=>{const e=(0,s.KR)(null),n=(0,s.KR)(null),r=async()=>{try{let n=await u.$.collection("Articles").doc(t).get();if(!n.exists)throw Error("That post does not exist");e.value={...n.data(),id:n.id}}catch(r){n.value=r.message}};return{post:e,error:n,load:r}};var c=a,h=n(1759),f={components:{SinglePost:h.A},data(){return{post:{},id:""}},created(){this.id=this.$route.params.postId,console.log(this.id)},mounted(){this.fetchpost()},methods:{async fetchpost(){const{post:t,error:e,load:n}=c(this.id);e.value?console.error("Error fetching post:",e.value):(await n(),this.post=t.value,console.log(this.post))}}},l=n(1241);const p=(0,l.A)(f,[["render",o]]);var d=p},3506:function(t,e,n){var r=n(3925),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},679:function(t,e,n){var r=n(1625),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new i("Incorrect invocation")}},7811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:function(t,e,n){var r=n(6706),i=n(4576),o=TypeError;t.exports=r(ArrayBuffer.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==i(t))throw new o("ArrayBuffer expected");return t.byteLength}},3238:function(t,e,n){var r=n(9504),i=n(7394),o=r(ArrayBuffer.prototype.slice);t.exports=function(t){if(0!==i(t))return!1;try{return o(t,0,0),!1}catch(e){return!0}}},5636:function(t,e,n){var r=n(4475),i=n(9504),o=n(6706),s=n(7696),u=n(3238),a=n(7394),c=n(4483),h=n(1548),f=r.structuredClone,l=r.ArrayBuffer,p=r.DataView,d=r.TypeError,v=Math.min,y=l.prototype,g=p.prototype,m=i(y.slice),b=o(y,"resizable","get"),w=o(y,"maxByteLength","get"),E=i(g.getInt8),I=i(g.setInt8);t.exports=(h||c)&&function(t,e,n){var r,i=a(t),o=void 0===e?i:s(e),y=!b||!b(t);if(u(t))throw new d("ArrayBuffer is detached");if(h&&(t=f(t,{transfer:[t]}),i===o&&(n||y)))return t;if(i>=o&&(!n||y))r=m(t,0,o);else{var g=n&&!y&&w?{maxByteLength:w(t)}:void 0;r=new l(o,g);for(var _=new p(t),T=new p(r),A=v(o,i),N=0;N<A;N++)I(T,N,E(_,N))}return h||c(t),r}},4644:function(t,e,n){var r,i,o,s=n(7811),u=n(3724),a=n(4475),c=n(4901),h=n(34),f=n(9297),l=n(6955),p=n(6823),d=n(6699),v=n(6840),y=n(2106),g=n(1625),m=n(2787),b=n(2967),w=n(8227),E=n(3392),I=n(1181),_=I.enforce,T=I.get,A=a.Int8Array,N=A&&A.prototype,S=a.Uint8ClampedArray,D=S&&S.prototype,x=A&&m(A),O=N&&m(N),k=Object.prototype,P=a.TypeError,L=w("toStringTag"),R=E("TYPED_ARRAY_TAG"),C="TypedArrayConstructor",V=s&&!!b&&"Opera"!==l(a.opera),M=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},j={BigInt64Array:8,BigUint64Array:8},F=function(t){if(!h(t))return!1;var e=l(t);return"DataView"===e||f(U,e)||f(j,e)},q=function(t){var e=m(t);if(h(e)){var n=T(e);return n&&f(n,C)?n[C]:q(e)}},B=function(t){if(!h(t))return!1;var e=l(t);return f(U,e)||f(j,e)},G=function(t){if(B(t))return t;throw new P("Target is not a typed array")},z=function(t){if(c(t)&&(!b||g(x,t)))return t;throw new P(p(t)+" is not a typed array constructor")},K=function(t,e,n,r){if(u){if(n)for(var i in U){var o=a[i];if(o&&f(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}O[t]&&!n||v(O,t,n?e:V&&N[t]||e,r)}},H=function(t,e,n){var r,i;if(u){if(b){if(n)for(r in U)if(i=a[r],i&&f(i,t))try{delete i[t]}catch(o){}if(x[t]&&!n)return;try{return v(x,t,n?e:V&&x[t]||e)}catch(o){}}for(r in U)i=a[r],!i||i[t]&&!n||v(i,t,e)}};for(r in U)i=a[r],o=i&&i.prototype,o?_(o)[C]=i:V=!1;for(r in j)i=a[r],o=i&&i.prototype,o&&(_(o)[C]=i);if((!V||!c(x)||x===Function.prototype)&&(x=function(){throw new P("Incorrect invocation")},V))for(r in U)a[r]&&b(a[r],x);if((!V||!O||O===k)&&(O=x.prototype,V))for(r in U)a[r]&&b(a[r].prototype,O);if(V&&m(D)!==O&&b(D,O),u&&!f(O,L))for(r in M=!0,y(O,L,{configurable:!0,get:function(){return h(this)?this[R]:void 0}}),U)a[r]&&d(a[r],R,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:V,TYPED_ARRAY_TAG:M&&R,aTypedArray:G,aTypedArrayConstructor:z,exportTypedArrayMethod:K,exportTypedArrayStaticMethod:H,getTypedArrayConstructor:q,isView:F,isTypedArray:B,TypedArray:x,TypedArrayPrototype:O}},5370:function(t,e,n){var r=n(6198);t.exports=function(t,e,n){var i=0,o=arguments.length>2?n:r(e),s=new t(o);while(o>i)s[i]=e[i++];return s}},7628:function(t,e,n){var r=n(6198);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},9928:function(t,e,n){var r=n(6198),i=n(1291),o=RangeError;t.exports=function(t,e,n,s){var u=r(t),a=i(n),c=a<0?u+a:a;if(c>=u||c<0)throw new o("Incorrect index");for(var h=new e(u),f=0;f<u;f++)h[f]=f===c?s:t[f];return h}},6955:function(t,e,n){var r=n(2140),i=n(4901),o=n(4576),s=n(8227),u=s("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}()),h=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=h(e=a(t),u))?n:c?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},2211:function(t,e,n){var r=n(9039);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2106:function(t,e,n){var r=n(283),i=n(4913);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},4483:function(t,e,n){var r,i,o,s,u=n(4475),a=n(9714),c=n(1548),h=u.structuredClone,f=u.ArrayBuffer,l=u.MessageChannel,p=!1;if(c)p=function(t){h(t,{transfer:[t]})};else if(f)try{l||(r=a("worker_threads"),r&&(l=r.MessageChannel)),l&&(i=new l,o=new f(2),s=function(t){i.port1.postMessage(null,[t])},2===o.byteLength&&(s(o),0===o.byteLength&&(p=s)))}catch(d){}t.exports=p},5002:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},7290:function(t,e,n){var r=n(516),i=n(9088);t.exports=!r&&!i&&"object"==typeof window&&"object"==typeof document},516:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},9088:function(t,e,n){var r=n(4475),i=n(4576);t.exports="process"===i(r.process)},6193:function(t,e,n){var r=n(9504),i=Error,o=r("".replace),s=function(t){return String(new i(t).stack)}("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,a=u.test(s);t.exports=function(t,e){if(a&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,u,"");return t}},3167:function(t,e,n){var r=n(4901),i=n(34),o=n(2967);t.exports=function(t,e,n){var s,u;return o&&r(s=e.constructor)&&s!==n&&i(u=s.prototype)&&u!==n.prototype&&o(t,u),t}},1108:function(t,e,n){var r=n(6955);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},3925:function(t,e,n){var r=n(34);t.exports=function(t){return r(t)||null===t}},2603:function(t,e,n){var r=n(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},2787:function(t,e,n){var r=n(9297),i=n(4901),o=n(8981),s=n(6119),u=n(2211),a=s("IE_PROTO"),c=Object,h=c.prototype;t.exports=u?c.getPrototypeOf:function(t){var e=o(t);if(r(e,a))return e[a];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof c?h:null}},2967:function(t,e,n){var r=n(6706),i=n(34),o=n(7750),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(u){}return function(n,r){return o(n),s(r),i(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},1548:function(t,e,n){var r=n(4475),i=n(9039),o=n(7388),s=n(7290),u=n(516),a=n(9088),c=r.structuredClone;t.exports=!!c&&!i((function(){if(u&&o>92||a&&o>94||s&&o>97)return!1;var t=new ArrayBuffer(8),e=c(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},5854:function(t,e,n){var r=n(2777),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},7696:function(t,e,n){var r=n(1291),i=n(8014),o=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw new o("Wrong length or index");return n}},2140:function(t,e,n){var r=n(8227),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},655:function(t,e,n){var r=n(6955),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},9714:function(t,e,n){var r=n(9088);t.exports=function(t){try{if(r)return Function('return require("'+t+'")')()}catch(e){}}},6573:function(t,e,n){var r=n(3724),i=n(2106),o=n(3238),s=ArrayBuffer.prototype;r&&!("detached"in s)&&i(s,"detached",{configurable:!0,get:function(){return o(this)}})},7936:function(t,e,n){var r=n(6518),i=n(5636);i&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(t,e,n){var r=n(6518),i=n(5636);i&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},7467:function(t,e,n){var r=n(7628),i=n(4644),o=i.aTypedArray,s=i.exportTypedArrayMethod,u=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),u(this))}))},4732:function(t,e,n){var r=n(4644),i=n(9504),o=n(9306),s=n(5370),u=r.aTypedArray,a=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,h=i(r.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&o(t);var e=u(this),n=s(a(e),e);return h(n,t)}))},9577:function(t,e,n){var r=n(9928),i=n(4644),o=n(1108),s=n(1291),u=n(5854),a=i.aTypedArray,c=i.getTypedArrayConstructor,h=i.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,e){var n=a(this),i=s(t),h=o(n)?u(e):+e;return r(n,c(n),i,h)}}["with"],!f)},4979:function(t,e,n){var r=n(6518),i=n(4475),o=n(7751),s=n(6980),u=n(4913).f,a=n(9297),c=n(679),h=n(3167),f=n(2603),l=n(5002),p=n(6193),d=n(3724),v=n(6395),y="DOMException",g=o("Error"),m=o(y),b=function(){c(this,w);var t=arguments.length,e=f(t<1?void 0:arguments[0]),n=f(t<2?void 0:arguments[1],"Error"),r=new m(e,n),i=new g(e);return i.name=y,u(r,"stack",s(1,p(i.stack,1))),h(r,this,b),r},w=b.prototype=m.prototype,E="stack"in new g(y),I="stack"in new m(1,2),_=m&&d&&Object.getOwnPropertyDescriptor(i,y),T=!!_&&!(_.writable&&_.configurable),A=E&&!T&&!I;r({global:!0,constructor:!0,forced:v||A},{DOMException:A?b:m});var N=o(y),S=N.prototype;if(S.constructor!==N)for(var D in v||u(S,"constructor",s(1,N)),l)if(a(l,D)){var x=l[D],O=x.s;a(N,O)||u(N,O,s(6,x.c))}}}]);
//# sourceMappingURL=about.a46d9e6f.js.map